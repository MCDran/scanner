{"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\hauntbrunswick.com\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"configFile\":false,\"cwd\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\hauntbrunswick.com\",\"filename\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\hauntbrunswick.com\\\\server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\hauntbrunswick.com\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.1:production":{"value":{"code":"\"use strict\";\n\nconst express = require('express');\nconst bodyParser = require('body-parser');\nconst mysql = require('mysql2');\nconst crypto = require('crypto'); // For generating registration numbers\nconst nodemailer = require('nodemailer');\nconst QRCode = require('qrcode');\nconst path = require('path');\nconst app = express();\napp.use(bodyParser.urlencoded({\n  extended: true\n}));\napp.use(express.static('public'));\napp.use(express.json());\n\n// MySQL connection setup\nconst connection = mysql.createConnection({\n  host: '100.87.150.78',\n  // 192.168.100.100\n  port: '3667',\n  user: 'valak',\n  password: 'SLEEP4tG',\n  database: 'MYSQL_DATABASE'\n});\nconnection.connect(err => {\n  if (err) {\n    console.error('Error connecting to MySQL:', err.stack);\n    return;\n  }\n  console.log('Connected to MySQL');\n});\nconnection.query('SELECT 1 + 1 AS solution', (err, results) => {\n  if (err) {\n    console.error('Error querying MySQL:', err.stack);\n  } else {\n    console.log('Test query successful, solution:', results[0].solution);\n  }\n});\nconst transporter = nodemailer.createTransport({\n  host: 'smtp.office365.com',\n  port: 587,\n  secure: false,\n  // Use TLS\n  auth: {\n    user: 'donotreply@hauntbrunswick.com',\n    // Your Office 365 email\n    pass: 'vsjwbdbfhvqrvyqw' // Your Office 365 app password\n  },\n\n  tls: {\n    rejectUnauthorized: false // This might help if there's an issue with the certificate\n  }\n});\n\nasync function sendRegistrationEmail(email, registrationNumber, timeSlot, names, viewUrl) {\n  // Generate the QR code\n  const qrCodeURL = await generateQRCode(registrationNumber, email);\n  const qrCodeData = `${registrationNumber}:${email}`;\n  const qrCodeBuffer = await QRCode.toBuffer(qrCodeData);\n  console.log(qrCodeURL);\n\n  // Email content with the embedded QR code\n  const emailContent = `\n        <h1>Thank you for registering!</h1>\n        <p>You have registered for the following time slot on <strong>Sunday, October 27th</strong>:</p>\n        <p>Time Slot: ${timeSlot}</p>\n        <p>Names of attendees: ${names.join(', ')}</p>\n        <p>You can view your registration details at <a href=\"${viewUrl}\">this link</a>.</p>\n        <p>Use the QR code below when checking in:</p>\n        <img src=\"cid:qrCode\" alt=\"QR Code\" />\n    `;\n\n  // Use Nodemailer to send the email (you likely have this setup already)\n  const mailOptions = {\n    from: 'donotreply@hauntbrunswick.com',\n    to: email,\n    subject: 'Your Haunted House Registration Confirmation',\n    html: emailContent,\n    attachments: [{\n      filename: 'qrcode.png',\n      content: qrCodeBuffer,\n      cid: 'qrCode' // Same CID as in the email content\n    }]\n  };\n\n  // Send the email\n  transporter.sendMail(mailOptions, (error, info) => {\n    if (error) {\n      console.error('Error sending email:', error);\n    } else {\n      console.log('Email sent: ' + info.response);\n    }\n  });\n}\nasync function generateQRCode(registrationNumber, email) {\n  try {\n    const qrCodeData = `${registrationNumber}:${email}`; // The data you want to encode in the QR code\n    const qrCodeURL = await QRCode.toDataURL(qrCodeData); // Generates a base64 image URL\n    return qrCodeURL;\n  } catch (err) {\n    console.error('Failed to generate QR Code', err);\n    throw err;\n  }\n}\napp.get('/checkin', (req, res) => {\n  res.sendFile(path.join(__dirname, 'public/checkin/index.html'));\n});\n\n// API route to handle QR code scan data\napp.post('/checkin', (req, res) => {\n  const {\n    registrationNumber,\n    email\n  } = req.body;\n\n  // Lookup logic: You would fetch the registrant's details from your database here.\n  // For now, let's simulate this with a simple check.\n\n  // Simulated registrant data (replace this with actual database lookup)\n  const mockRegistrant = {\n    registrationNumber: '123456',\n    email: 'user@example.com',\n    name: 'John Doe',\n    timeSlot: '7:00 PM'\n  };\n\n  // Check if the scanned data matches the mock registrant data\n  if (registrationNumber === mockRegistrant.registrationNumber && email === mockRegistrant.email) {\n    res.status(200).json({\n      success: true,\n      message: 'Registrant found!',\n      registrant: mockRegistrant\n    });\n  } else {\n    res.status(404).json({\n      success: false,\n      message: 'Registrant not found!'\n    });\n  }\n});\n\n// In-memory storage of available spots (this could also be in the database)\nlet availableSlots = {\n  '6:00 PM': 20,\n  '6:15 PM': 20,\n  '6:30 PM': 20,\n  '6:45 PM': 20,\n  '7:00 PM': 20,\n  '7:15 PM': 20,\n  '7:30 PM': 20,\n  '7:45 PM': 20,\n  '8:00 PM': 20,\n  '8:15 PM': 20,\n  '8:30 PM': 20,\n  '8:45 PM': 20\n};\nfunction generateRegistrationNumber() {\n  const now = new Date();\n  const day = String(now.getDate()).padStart(2, '0'); // DD\n  const month = String(now.getMonth() + 1).padStart(2, '0'); // MM\n  const year = String(now.getFullYear()).slice(-2); // YY\n  const randomFourDigits = Math.floor(1000 + Math.random() * 9000);\n  return `LC-${day}${month}${year}-${randomFourDigits}`;\n}\n\n//View registration\napp.post('/view-registration', (req, res) => {\n  const {\n    registration_number,\n    email\n  } = req.body;\n\n  // Query to find the registration based on registration number and email\n  const sql = 'SELECT * FROM registrations WHERE registration_number = ? AND email = ?';\n  connection.query(sql, [registration_number, email], (err, results) => {\n    if (err || results.length === 0) {\n      return res.send(`\n                <head>\n                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                    <title>No Registration Found</title>\n                </head>\n                <h1>No Registration Found</h1>\n                <p>We couldn't find a registration with that number and email.</p>\n                <a href=\"/view.html\">Try again</a>\n            `);\n    }\n    const registration = results[0];\n    const namesArray = registration.names.split(', ');\n    const agesArray = registration.ages.split(', ');\n    let registrationDetails = `\n            <head>\n                <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                <title>Modify Registration</title>\n            </head>\n            <h2>Registration Details</h2>\n            <p>Registration Number: ${registration.registration_number}</p>\n            <p>Email: ${registration.email}</p>\n            <p>Time Slot: ${registration.time_slot}</p>\n            <form id=\"modify-form\" action=\"/modify-registration\" method=\"POST\">\n                <input type=\"hidden\" name=\"registration_number\" value=\"${registration.registration_number}\">\n                <input type=\"hidden\" name=\"email\" value=\"${registration.email}\">\n        `;\n\n    // Generate attendee fields for modification\n    namesArray.forEach((name, index) => {\n      registrationDetails += `\n                <div class=\"attendee\" id=\"attendee-${index + 1}\">\n                    <label for=\"name${index + 1}\">Name:</label>\n                    <input type=\"text\" id=\"name${index + 1}\" name=\"names[]\" value=\"${name}\" required>\n                    <label for=\"age${index + 1}\">Age:</label>\n                    <select id=\"age${index + 1}\" name=\"ages[]\" required>\n                        <option value=\"16-20\" ${agesArray[index] === '16-20' ? 'selected' : ''}>16-20</option>\n                        <option value=\"21-30\" ${agesArray[index] === '21-30' ? 'selected' : ''}>21-30</option>\n                        <option value=\"31-40\" ${agesArray[index] === '31-40' ? 'selected' : ''}>31-40</option>\n                        <option value=\"41-50\" ${agesArray[index] === '41-50' ? 'selected' : ''}>41-50</option>\n                        <option value=\"51+\" ${agesArray[index] === '51+' ? 'selected' : ''}>51+</option>\n                    </select>\n                    <button type=\"button\" onclick=\"removeAttendee(${index + 1})\">Remove</button>\n                </div>\n            `;\n    });\n\n    // Add \"Remove All\" button and submit button\n    registrationDetails += `\n                <button type=\"button\" onclick=\"confirmRemoveAll()\">Remove All</button>\n                <button class=\"button\" type=\"submit\">Submit Changes</button>\n            </form>\n\n            <script>\n                // Function to remove individual attendees\n                function removeAttendee(index) {\n                    const attendeeElement = document.getElementById('attendee-' + index);\n                    attendeeElement.remove();\n                }\n\n                // Function to confirm removing all attendees\n                function confirmRemoveAll() {\n                    const attendeeElements = document.querySelectorAll('.attendee');\n\n                    if (attendeeElements.length === 0) {\n                        alert(\"No registrants to remove.\");\n                        return;\n                    }\n\n                    const confirmed = confirm(\"Are you sure you want to remove all registrants?\");\n                    if (confirmed) {\n                        attendeeElements.forEach(attendee => attendee.remove());\n                    }\n                }\n            </script>\n        `;\n\n    // Return the registration details to the user\n    res.send(registrationDetails);\n  });\n});\napp.post('/modify-registration', (req, res) => {\n  const {\n    registration_number,\n    email,\n    names,\n    ages\n  } = req.body;\n\n  // Query to find the existing registration before making changes\n  const sqlFind = 'SELECT * FROM registrations WHERE registration_number = ? AND email = ?';\n  connection.query(sqlFind, [registration_number, email], (err, results) => {\n    if (err || results.length === 0) {\n      return res.send(`\n                <head>\n                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                    <title>No Registration Found</title>\n                </head>\n                <h1>No Registration Found</h1>\n                <p>We couldn't find a registration with that number and email.</p>\n                <a href=\"/view.html\">Try again</a>\n            `);\n    }\n    const registration = results[0];\n    const existingRegistrantCount = registration.names ? registration.names.split(', ').length : 0;\n\n    // If 'names' array is undefined or empty, delete the registration and add spots back to the time slot\n    if (!names || names.length === 0) {\n      const sqlDelete = 'DELETE FROM registrations WHERE registration_number = ? AND email = ?';\n      connection.query(sqlDelete, [registration_number, email], err => {\n        if (err) {\n          return res.send(`\n                        <head>\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                            <title>Removal Failed</title>\n                        </head>\n                        <h1>Error</h1>\n                        <p>There was an issue removing your registration. Please try again later.</p>\n                        <a href=\"/view.html\">Go back</a>\n                    `);\n        }\n\n        // Add back all spots when registration is removed\n        const sqlUpdateSpots = 'UPDATE time_slots SET spots_remaining = spots_remaining + ? WHERE time_slot = ?';\n        connection.query(sqlUpdateSpots, [existingRegistrantCount, registration.time_slot], err => {\n          if (err) {\n            return res.send(`\n                            <head>\n                                <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                                <title>Error Updating</title>\n                            </head>\n                            <h1>Error Updating Spots</h1>\n                            <p>There was an issue updating the available spots for the time slot.</p>\n                            <a href=\"/\">Go back to the home page</a>\n                        `);\n          }\n          res.send(`\n                        <head>\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                            <title>Registration Removed</title>\n                        </head>\n                        <h1>Registration Removed</h1>\n                        <p>Your registration has been successfully removed.</p>\n                        <a href=\"/\">Go back to the home page</a>\n                    `);\n        });\n      });\n    } else {\n      // Calculate the difference in registrant count (if any registrants were added or removed)\n      const newRegistrantCount = names.length;\n      const difference = existingRegistrantCount - newRegistrantCount;\n\n      // Safeguard for undefined names or ages when joining\n      const namesString = names && names.length ? names.join(', ') : '';\n      const agesString = ages && ages.length ? ages.join(', ') : '';\n      const sqlUpdate = `\n                UPDATE registrations\n                SET names = ?, ages = ?\n                WHERE registration_number = ? AND email = ?\n            `;\n      connection.query(sqlUpdate, [namesString, agesString, registration_number, email], err => {\n        if (err) {\n          return res.send(`\n                        <head>\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                            <title>Update Failed</title>\n                        </head>\n                        <h1>Update Failed</h1>\n                        <p>There was an issue updating your registration. Please try again later.</p>\n                        <a href=\"/view.html\">Go back</a>\n                    `);\n        }\n\n        // Update spots remaining based on the difference in registrants\n        if (difference !== 0) {\n          const sqlUpdateSpots = 'UPDATE time_slots SET spots_remaining = spots_remaining + ? WHERE time_slot = ?';\n          connection.query(sqlUpdateSpots, [difference, registration.time_slot], err => {\n            if (err) {\n              return res.send(`\n                                <head>\n                                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                                    <title>Update Failed</title>\n                                </head>\n                                <h1>Error Updating Spots</h1>\n                                <p>There was an issue updating the available spots for the time slot.</p>\n                                <a href=\"/\">Go back to the home page</a>\n                            `);\n            }\n            res.send(`\n                            <head>\n                                <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                                <title>Registration Updated</title>\n                            </head>\n                            <h1>Registration Updated</h1>\n                            <p>Your registration has been successfully updated.</p>\n                            <a href=\"/\">Go back to the home page</a>\n                        `);\n          });\n        } else {\n          res.send(`\n                        <head>\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                            <title>Registration Updated</title>\n                        </head>\n                        <h1>Registration Updated</h1>\n                        <p>Your registration has been successfully updated.</p>\n                        <a href=\"/\">Go back to the home page</a>\n                    `);\n        }\n      });\n    }\n  });\n});\n\n//ADMIN page\nconst adminPassword = 'SLEEP4tG'; // Replace with your actual password\n\n// Middleware to protect the admin route\nfunction checkAdminAuth(req, res, next) {\n  const auth = req.headers['authorization'];\n  if (!auth) {\n    res.setHeader('WWW-Authenticate', 'Basic realm=\"Admin Area\"');\n    return res.status(401).send('Authentication required.');\n  }\n  const encoded = auth.split(' ')[1];\n  const decoded = Buffer.from(encoded, 'base64').toString('utf-8');\n  const [username, password] = decoded.split(':');\n  if (username === 'admin' && password === adminPassword) {\n    return next();\n  }\n  res.setHeader('WWW-Authenticate', 'Basic realm=\"Admin Area\"');\n  return res.status(401).send('Authentication failed.');\n}\napp.get('/admin', checkAdminAuth, (req, res) => {\n  const sql = 'SELECT * FROM registrations ORDER BY time_slot';\n  connection.query(sql, (err, results) => {\n    if (err) {\n      return res.send('Error retrieving registrations.');\n    }\n\n    // Create HTML table for the registrations\n    let html = `\n            <h1>Admin: View Registrations</h1>\n            <table border=\"1\">\n                <tr>\n                    <th>Registration Number</th>\n                    <th>Email</th>\n                    <th>Time Slot</th>\n                    <th>Names</th>\n                    <th>Ages</th>\n                    <th>Action</th>\n                </tr>\n        `;\n    results.forEach(registration => {\n      html += `\n                <tr>\n                    <td>${registration.registration_number}</td>\n                    <td>${registration.email}</td>\n                    <td>${registration.time_slot}</td>\n                    <td>${registration.names}</td>\n                    <td>${registration.ages}</td>\n                    <td>\n                        <form action=\"/admin/delete\" method=\"POST\">\n                            <input type=\"hidden\" name=\"registration_number\" value=\"${registration.registration_number}\" />\n                            <button type=\"submit\">Remove</button>\n                        </form>\n                    </td>\n                </tr>\n            `;\n    });\n    html += '</table>';\n    res.send(html);\n  });\n});\napp.post('/register', async (req, res) => {\n  const {\n    email,\n    registrationNumber,\n    timeSlot,\n    names,\n    viewUrl\n  } = req.body;\n  try {\n    await sendRegistrationEmail(email, registrationNumber, timeSlot, names, viewUrl);\n    res.status(200).send('Registration successful, email sent.');\n  } catch (error) {\n    res.status(500).send('Registration successful, but email failed.');\n  }\n});\napp.post('/admin/delete', checkAdminAuth, (req, res) => {\n  const registrationNumber = req.body.registration_number;\n\n  // Retrieve the registration details\n  const sqlSelect = 'SELECT * FROM registrations WHERE registration_number = ?';\n  connection.query(sqlSelect, [registrationNumber], (err, results) => {\n    if (err || results.length === 0) {\n      return res.send('Error finding the registration.');\n    }\n    const registration = results[0];\n    const numberOfPeople = registration.names.split(', ').length; // Split by comma to count names\n\n    // Delete the registration from the database\n    const sqlDelete = 'DELETE FROM registrations WHERE registration_number = ?';\n    connection.query(sqlDelete, [registrationNumber], err => {\n      if (err) {\n        return res.send('Error deleting the registration.');\n      }\n\n      // Add back the number of spots to the time slot\n      const sqlUpdateSpots = 'UPDATE time_slots SET spots_remaining = spots_remaining + ? WHERE time_slot = ?';\n      connection.query(sqlUpdateSpots, [numberOfPeople, registration.time_slot], err => {\n        if (err) {\n          return res.send('Error updating spots.');\n        }\n        res.redirect('/admin'); // Refresh the admin page after deletion\n      });\n    });\n  });\n});\n\n// Serve the landing and registration pages\napp.get('/', (req, res) => {\n  res.sendFile(__dirname + '/public/index.html');\n});\napp.get('/register.html', (req, res) => {\n  res.sendFile(__dirname + '/public/register.html');\n});\napp.get('/spots', (req, res) => {\n  const sql = 'SELECT time_slot, spots_remaining FROM time_slots';\n  connection.query(sql, (err, results) => {\n    if (err) {\n      return res.status(500).json({\n        error: 'Error fetching available spots'\n      });\n    }\n    res.json(results);\n  });\n});\n\n// Handle form submission\napp.post('/submit', (req, res) => {\n  const {\n    timeSlot,\n    email,\n    names,\n    ages\n  } = req.body;\n  const registrationNumber = generateRegistrationNumber();\n\n  // Step 1: Check the remaining spots from the database\n  const checkSpotsSql = 'SELECT spots_remaining FROM time_slots WHERE time_slot = ?';\n  connection.query(checkSpotsSql, [timeSlot], (err, results) => {\n    if (err || results.length === 0) {\n      console.error('Error checking spots:', err);\n      return res.send(`\n                <head>\n                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                    <title>Registration Failed</title>\n                </head>\n                <h1>Registration Failed</h1>\n                <p>Could not retrieve available spots. Please try again later.</p>\n                <a href=\"/register.html\">Go back</a>\n            `);\n    }\n    const spotsRemaining = results[0].spots_remaining;\n\n    // Step 2: Check if there are enough spots\n    if (spotsRemaining < names.length) {\n      return res.send(`\n                <head>\n                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                    <title>Registration Failed</title>\n                </head>\n                <h1>Registration Failed</h1>\n                <p>Sorry, there aren't enough spots left for the selected time slot (${timeSlot}).</p>\n                <a href=\"/register.html\">Go back and try another slot</a>\n            `);\n    }\n\n    // Step 3: Deduct the number of registered people from the available spots\n    const updateSpotsSql = 'UPDATE time_slots SET spots_remaining = spots_remaining - ? WHERE time_slot = ?';\n    connection.query(updateSpotsSql, [names.length, timeSlot], err => {\n      if (err) {\n        console.error('Error updating spots:', err);\n        return res.send(`\n                    <head>\n                        <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                        <title>Registration Failed</title>\n                    </head>\n                    <h1>Registration Failed</h1>\n                    <p>Could not update available spots. Please try again later.</p>\n                    <a href=\"/register.html\">Go back</a>\n                `);\n      }\n\n      // Step 4: Save registration to the MySQL database\n      const sql = `\n                INSERT INTO registrations (registration_number, email, time_slot, names, ages)\n                VALUES (?, ?, ?, ?, ?)\n            `;\n      const namesString = names.join(', ');\n      const agesString = ages.join(', ');\n      connection.query(sql, [registrationNumber, email, timeSlot, namesString, agesString], err => {\n        if (err) {\n          console.error('Database error:', err);\n          return res.send(`\n                        <head>\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                            <title>Registration Failed</title>\n                        </head>\n                        <h1>Registration Failed</h1>\n                        <p>There was an issue saving your registration. Please try again later.</p>\n                        <a href=\"/register.html\">Go back</a>\n                    `);\n        }\n\n        //Send email\n        const viewUrl = `https://your-domain.com/view-registration?number=${registrationNumber}`;\n        sendRegistrationEmail(email, registrationNumber, timeSlot, names, viewUrl);\n\n        // Return a confirmation\n        res.send(`\n                    <head>\n                        <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                        <title>Thank you!</title>\n                    </head>\n                    <h1>Thank you for registering!</h1>\n                    <p>You have registered ${names.length} person(s) for the ${timeSlot} time slot.</p>\n                    <p>Your registration number is <strong>${registrationNumber}</strong>. Please keep this number for future reference.</p>\n                    <a href=\"/\">Go back to the home page</a>\n                `);\n      });\n    });\n  });\n});\n\n// Start server\nconst PORT = process.env.PORT || 3000;\napp.listen(PORT, () => {\n  console.log(`Server running on port ${PORT}`);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImJvZHlQYXJzZXIiLCJteXNxbCIsImNyeXB0byIsIm5vZGVtYWlsZXIiLCJRUkNvZGUiLCJwYXRoIiwiYXBwIiwidXNlIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwic3RhdGljIiwianNvbiIsImNvbm5lY3Rpb24iLCJjcmVhdGVDb25uZWN0aW9uIiwiaG9zdCIsInBvcnQiLCJ1c2VyIiwicGFzc3dvcmQiLCJkYXRhYmFzZSIsImNvbm5lY3QiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJzdGFjayIsImxvZyIsInF1ZXJ5IiwicmVzdWx0cyIsInNvbHV0aW9uIiwidHJhbnNwb3J0ZXIiLCJjcmVhdGVUcmFuc3BvcnQiLCJzZWN1cmUiLCJhdXRoIiwicGFzcyIsInRscyIsInJlamVjdFVuYXV0aG9yaXplZCIsInNlbmRSZWdpc3RyYXRpb25FbWFpbCIsImVtYWlsIiwicmVnaXN0cmF0aW9uTnVtYmVyIiwidGltZVNsb3QiLCJuYW1lcyIsInZpZXdVcmwiLCJxckNvZGVVUkwiLCJnZW5lcmF0ZVFSQ29kZSIsInFyQ29kZURhdGEiLCJxckNvZGVCdWZmZXIiLCJ0b0J1ZmZlciIsImVtYWlsQ29udGVudCIsImpvaW4iLCJtYWlsT3B0aW9ucyIsImZyb20iLCJ0byIsInN1YmplY3QiLCJodG1sIiwiYXR0YWNobWVudHMiLCJmaWxlbmFtZSIsImNvbnRlbnQiLCJjaWQiLCJzZW5kTWFpbCIsImluZm8iLCJyZXNwb25zZSIsInRvRGF0YVVSTCIsImdldCIsInJlcSIsInJlcyIsInNlbmRGaWxlIiwiX19kaXJuYW1lIiwicG9zdCIsImJvZHkiLCJtb2NrUmVnaXN0cmFudCIsIm5hbWUiLCJzdGF0dXMiLCJzdWNjZXNzIiwibWVzc2FnZSIsInJlZ2lzdHJhbnQiLCJhdmFpbGFibGVTbG90cyIsImdlbmVyYXRlUmVnaXN0cmF0aW9uTnVtYmVyIiwibm93IiwiRGF0ZSIsImRheSIsIlN0cmluZyIsImdldERhdGUiLCJwYWRTdGFydCIsIm1vbnRoIiwiZ2V0TW9udGgiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJzbGljZSIsInJhbmRvbUZvdXJEaWdpdHMiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJyZWdpc3RyYXRpb25fbnVtYmVyIiwic3FsIiwibGVuZ3RoIiwic2VuZCIsInJlZ2lzdHJhdGlvbiIsIm5hbWVzQXJyYXkiLCJzcGxpdCIsImFnZXNBcnJheSIsImFnZXMiLCJyZWdpc3RyYXRpb25EZXRhaWxzIiwidGltZV9zbG90IiwiZm9yRWFjaCIsImluZGV4Iiwic3FsRmluZCIsImV4aXN0aW5nUmVnaXN0cmFudENvdW50Iiwic3FsRGVsZXRlIiwic3FsVXBkYXRlU3BvdHMiLCJuZXdSZWdpc3RyYW50Q291bnQiLCJkaWZmZXJlbmNlIiwibmFtZXNTdHJpbmciLCJhZ2VzU3RyaW5nIiwic3FsVXBkYXRlIiwiYWRtaW5QYXNzd29yZCIsImNoZWNrQWRtaW5BdXRoIiwibmV4dCIsImhlYWRlcnMiLCJzZXRIZWFkZXIiLCJlbmNvZGVkIiwiZGVjb2RlZCIsIkJ1ZmZlciIsInRvU3RyaW5nIiwidXNlcm5hbWUiLCJzcWxTZWxlY3QiLCJudW1iZXJPZlBlb3BsZSIsInJlZGlyZWN0IiwiY2hlY2tTcG90c1NxbCIsInNwb3RzUmVtYWluaW5nIiwic3BvdHNfcmVtYWluaW5nIiwidXBkYXRlU3BvdHNTcWwiLCJQT1JUIiwicHJvY2VzcyIsImVudiIsImxpc3RlbiJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxBbmRyZXdcXERvY3VtZW50c1xcUHJvamVjdHNcXEhIIDI0J1xcaGF1bnRicnVuc3dpY2suY29tXFwiLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xyXG5jb25zdCBib2R5UGFyc2VyID0gcmVxdWlyZSgnYm9keS1wYXJzZXInKTtcclxuY29uc3QgbXlzcWwgPSByZXF1aXJlKCdteXNxbDInKTtcclxuY29uc3QgY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJyk7ICAvLyBGb3IgZ2VuZXJhdGluZyByZWdpc3RyYXRpb24gbnVtYmVyc1xyXG5jb25zdCBub2RlbWFpbGVyID0gcmVxdWlyZSgnbm9kZW1haWxlcicpO1xyXG5jb25zdCBRUkNvZGUgPSByZXF1aXJlKCdxcmNvZGUnKTtcclxuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5cclxuYXBwLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSB9KSk7XHJcbmFwcC51c2UoZXhwcmVzcy5zdGF0aWMoJ3B1YmxpYycpKTtcclxuYXBwLnVzZShleHByZXNzLmpzb24oKSk7XHJcblxyXG4vLyBNeVNRTCBjb25uZWN0aW9uIHNldHVwXHJcbmNvbnN0IGNvbm5lY3Rpb24gPSBteXNxbC5jcmVhdGVDb25uZWN0aW9uKHtcclxuICAgIGhvc3Q6ICcxMDAuODcuMTUwLjc4JywgIC8vIDE5Mi4xNjguMTAwLjEwMFxyXG4gICAgcG9ydDogJzM2NjcnLFxyXG4gICAgdXNlcjogJ3ZhbGFrJyxcclxuICAgIHBhc3N3b3JkOiAnU0xFRVA0dEcnLFxyXG4gICAgZGF0YWJhc2U6ICdNWVNRTF9EQVRBQkFTRSdcclxufSk7XHJcblxyXG5jb25uZWN0aW9uLmNvbm5lY3QoKGVycikgPT4ge1xyXG4gICAgaWYgKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNvbm5lY3RpbmcgdG8gTXlTUUw6JywgZXJyLnN0YWNrKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZygnQ29ubmVjdGVkIHRvIE15U1FMJyk7XHJcbn0pO1xyXG5cclxuY29ubmVjdGlvbi5xdWVyeSgnU0VMRUNUIDEgKyAxIEFTIHNvbHV0aW9uJywgKGVyciwgcmVzdWx0cykgPT4ge1xyXG4gICAgaWYgKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHF1ZXJ5aW5nIE15U1FMOicsIGVyci5zdGFjayk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdUZXN0IHF1ZXJ5IHN1Y2Nlc3NmdWwsIHNvbHV0aW9uOicsIHJlc3VsdHNbMF0uc29sdXRpb24pO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmNvbnN0IHRyYW5zcG9ydGVyID0gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoe1xyXG4gICAgaG9zdDogJ3NtdHAub2ZmaWNlMzY1LmNvbScsXHJcbiAgICBwb3J0OiA1ODcsXHJcbiAgICBzZWN1cmU6IGZhbHNlLCAvLyBVc2UgVExTXHJcbiAgICBhdXRoOiB7XHJcbiAgICAgICAgdXNlcjogJ2Rvbm90cmVwbHlAaGF1bnRicnVuc3dpY2suY29tJywgLy8gWW91ciBPZmZpY2UgMzY1IGVtYWlsXHJcbiAgICAgICAgcGFzczogJ3ZzandiZGJmaHZxcnZ5cXcnIC8vIFlvdXIgT2ZmaWNlIDM2NSBhcHAgcGFzc3dvcmRcclxuICAgIH0sXHJcbiAgICB0bHM6IHtcclxuICAgICAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlIC8vIFRoaXMgbWlnaHQgaGVscCBpZiB0aGVyZSdzIGFuIGlzc3VlIHdpdGggdGhlIGNlcnRpZmljYXRlXHJcbiAgICB9XHJcbn0pO1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gc2VuZFJlZ2lzdHJhdGlvbkVtYWlsKGVtYWlsLCByZWdpc3RyYXRpb25OdW1iZXIsIHRpbWVTbG90LCBuYW1lcywgdmlld1VybCkge1xyXG4gICAgLy8gR2VuZXJhdGUgdGhlIFFSIGNvZGVcclxuICAgIGNvbnN0IHFyQ29kZVVSTCA9IGF3YWl0IGdlbmVyYXRlUVJDb2RlKHJlZ2lzdHJhdGlvbk51bWJlciwgZW1haWwpO1xyXG4gICAgY29uc3QgcXJDb2RlRGF0YSA9IGAke3JlZ2lzdHJhdGlvbk51bWJlcn06JHtlbWFpbH1gO1xyXG4gICAgY29uc3QgcXJDb2RlQnVmZmVyID0gYXdhaXQgUVJDb2RlLnRvQnVmZmVyKHFyQ29kZURhdGEpO1xyXG4gICAgY29uc29sZS5sb2cocXJDb2RlVVJMKTtcclxuXHJcbiAgICAvLyBFbWFpbCBjb250ZW50IHdpdGggdGhlIGVtYmVkZGVkIFFSIGNvZGVcclxuICAgIGNvbnN0IGVtYWlsQ29udGVudCA9IGBcclxuICAgICAgICA8aDE+VGhhbmsgeW91IGZvciByZWdpc3RlcmluZyE8L2gxPlxyXG4gICAgICAgIDxwPllvdSBoYXZlIHJlZ2lzdGVyZWQgZm9yIHRoZSBmb2xsb3dpbmcgdGltZSBzbG90IG9uIDxzdHJvbmc+U3VuZGF5LCBPY3RvYmVyIDI3dGg8L3N0cm9uZz46PC9wPlxyXG4gICAgICAgIDxwPlRpbWUgU2xvdDogJHt0aW1lU2xvdH08L3A+XHJcbiAgICAgICAgPHA+TmFtZXMgb2YgYXR0ZW5kZWVzOiAke25hbWVzLmpvaW4oJywgJyl9PC9wPlxyXG4gICAgICAgIDxwPllvdSBjYW4gdmlldyB5b3VyIHJlZ2lzdHJhdGlvbiBkZXRhaWxzIGF0IDxhIGhyZWY9XCIke3ZpZXdVcmx9XCI+dGhpcyBsaW5rPC9hPi48L3A+XHJcbiAgICAgICAgPHA+VXNlIHRoZSBRUiBjb2RlIGJlbG93IHdoZW4gY2hlY2tpbmcgaW46PC9wPlxyXG4gICAgICAgIDxpbWcgc3JjPVwiY2lkOnFyQ29kZVwiIGFsdD1cIlFSIENvZGVcIiAvPlxyXG4gICAgYDtcclxuXHJcbiAgICAvLyBVc2UgTm9kZW1haWxlciB0byBzZW5kIHRoZSBlbWFpbCAoeW91IGxpa2VseSBoYXZlIHRoaXMgc2V0dXAgYWxyZWFkeSlcclxuICAgIGNvbnN0IG1haWxPcHRpb25zID0ge1xyXG4gICAgICAgIGZyb206ICdkb25vdHJlcGx5QGhhdW50YnJ1bnN3aWNrLmNvbScsXHJcbiAgICAgICAgdG86IGVtYWlsLFxyXG4gICAgICAgIHN1YmplY3Q6ICdZb3VyIEhhdW50ZWQgSG91c2UgUmVnaXN0cmF0aW9uIENvbmZpcm1hdGlvbicsXHJcbiAgICAgICAgaHRtbDogZW1haWxDb250ZW50LFxyXG4gICAgICAgIGF0dGFjaG1lbnRzOiBbe1xyXG4gICAgICAgICAgZmlsZW5hbWU6ICdxcmNvZGUucG5nJyxcclxuICAgICAgICAgIGNvbnRlbnQ6IHFyQ29kZUJ1ZmZlcixcclxuICAgICAgICAgIGNpZDogJ3FyQ29kZScgIC8vIFNhbWUgQ0lEIGFzIGluIHRoZSBlbWFpbCBjb250ZW50XHJcbiAgICAgICAgfV1cclxuICAgIH07XHJcblxyXG4gICAgLy8gU2VuZCB0aGUgZW1haWxcclxuICAgIHRyYW5zcG9ydGVyLnNlbmRNYWlsKG1haWxPcHRpb25zLCAoZXJyb3IsIGluZm8pID0+IHtcclxuICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VuZGluZyBlbWFpbDonLCBlcnJvcik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0VtYWlsIHNlbnQ6ICcgKyBpbmZvLnJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVRUkNvZGUocmVnaXN0cmF0aW9uTnVtYmVyLCBlbWFpbCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBxckNvZGVEYXRhID0gYCR7cmVnaXN0cmF0aW9uTnVtYmVyfToke2VtYWlsfWA7IC8vIFRoZSBkYXRhIHlvdSB3YW50IHRvIGVuY29kZSBpbiB0aGUgUVIgY29kZVxyXG4gICAgY29uc3QgcXJDb2RlVVJMID0gYXdhaXQgUVJDb2RlLnRvRGF0YVVSTChxckNvZGVEYXRhKTsgLy8gR2VuZXJhdGVzIGEgYmFzZTY0IGltYWdlIFVSTFxyXG4gICAgcmV0dXJuIHFyQ29kZVVSTDtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBnZW5lcmF0ZSBRUiBDb2RlJywgZXJyKTtcclxuICAgIHRocm93IGVycjtcclxuICB9XHJcbn1cclxuXHJcbmFwcC5nZXQoJy9jaGVja2luJywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgcmVzLnNlbmRGaWxlKHBhdGguam9pbihfX2Rpcm5hbWUsICdwdWJsaWMvY2hlY2tpbi9pbmRleC5odG1sJykpO1xyXG59KTtcclxuXHJcbi8vIEFQSSByb3V0ZSB0byBoYW5kbGUgUVIgY29kZSBzY2FuIGRhdGFcclxuYXBwLnBvc3QoJy9jaGVja2luJywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgeyByZWdpc3RyYXRpb25OdW1iZXIsIGVtYWlsIH0gPSByZXEuYm9keTtcclxuXHJcbiAgLy8gTG9va3VwIGxvZ2ljOiBZb3Ugd291bGQgZmV0Y2ggdGhlIHJlZ2lzdHJhbnQncyBkZXRhaWxzIGZyb20geW91ciBkYXRhYmFzZSBoZXJlLlxyXG4gIC8vIEZvciBub3csIGxldCdzIHNpbXVsYXRlIHRoaXMgd2l0aCBhIHNpbXBsZSBjaGVjay5cclxuXHJcbiAgLy8gU2ltdWxhdGVkIHJlZ2lzdHJhbnQgZGF0YSAocmVwbGFjZSB0aGlzIHdpdGggYWN0dWFsIGRhdGFiYXNlIGxvb2t1cClcclxuICBjb25zdCBtb2NrUmVnaXN0cmFudCA9IHtcclxuICAgIHJlZ2lzdHJhdGlvbk51bWJlcjogJzEyMzQ1NicsXHJcbiAgICBlbWFpbDogJ3VzZXJAZXhhbXBsZS5jb20nLFxyXG4gICAgbmFtZTogJ0pvaG4gRG9lJyxcclxuICAgIHRpbWVTbG90OiAnNzowMCBQTSdcclxuICB9O1xyXG5cclxuICAvLyBDaGVjayBpZiB0aGUgc2Nhbm5lZCBkYXRhIG1hdGNoZXMgdGhlIG1vY2sgcmVnaXN0cmFudCBkYXRhXHJcbiAgaWYgKHJlZ2lzdHJhdGlvbk51bWJlciA9PT0gbW9ja1JlZ2lzdHJhbnQucmVnaXN0cmF0aW9uTnVtYmVyICYmIGVtYWlsID09PSBtb2NrUmVnaXN0cmFudC5lbWFpbCkge1xyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBtZXNzYWdlOiAnUmVnaXN0cmFudCBmb3VuZCEnLFxyXG4gICAgICByZWdpc3RyYW50OiBtb2NrUmVnaXN0cmFudFxyXG4gICAgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2U6ICdSZWdpc3RyYW50IG5vdCBmb3VuZCEnXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gSW4tbWVtb3J5IHN0b3JhZ2Ugb2YgYXZhaWxhYmxlIHNwb3RzICh0aGlzIGNvdWxkIGFsc28gYmUgaW4gdGhlIGRhdGFiYXNlKVxyXG5sZXQgYXZhaWxhYmxlU2xvdHMgPSB7XHJcbiAgICAnNjowMCBQTSc6IDIwLFxyXG4gICAgJzY6MTUgUE0nOiAyMCxcclxuICAgICc2OjMwIFBNJzogMjAsXHJcbiAgICAnNjo0NSBQTSc6IDIwLFxyXG4gICAgJzc6MDAgUE0nOiAyMCxcclxuICAgICc3OjE1IFBNJzogMjAsXHJcbiAgICAnNzozMCBQTSc6IDIwLFxyXG4gICAgJzc6NDUgUE0nOiAyMCxcclxuICAgICc4OjAwIFBNJzogMjAsXHJcbiAgICAnODoxNSBQTSc6IDIwLFxyXG4gICAgJzg6MzAgUE0nOiAyMCxcclxuICAgICc4OjQ1IFBNJzogMjBcclxufTtcclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlUmVnaXN0cmF0aW9uTnVtYmVyKCkge1xyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgIGNvbnN0IGRheSA9IFN0cmluZyhub3cuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpOyAgICAgIC8vIEREXHJcbiAgICBjb25zdCBtb250aCA9IFN0cmluZyhub3cuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7IC8vIE1NXHJcbiAgICBjb25zdCB5ZWFyID0gU3RyaW5nKG5vdy5nZXRGdWxsWWVhcigpKS5zbGljZSgtMik7ICAgICAgICAvLyBZWVxyXG4gICAgY29uc3QgcmFuZG9tRm91ckRpZ2l0cyA9IE1hdGguZmxvb3IoMTAwMCArIE1hdGgucmFuZG9tKCkgKiA5MDAwKTtcclxuICAgIHJldHVybiBgTEMtJHtkYXl9JHttb250aH0ke3llYXJ9LSR7cmFuZG9tRm91ckRpZ2l0c31gO1xyXG59XHJcblxyXG4vL1ZpZXcgcmVnaXN0cmF0aW9uXHJcbmFwcC5wb3N0KCcvdmlldy1yZWdpc3RyYXRpb24nLCAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgcmVnaXN0cmF0aW9uX251bWJlciwgZW1haWwgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIC8vIFF1ZXJ5IHRvIGZpbmQgdGhlIHJlZ2lzdHJhdGlvbiBiYXNlZCBvbiByZWdpc3RyYXRpb24gbnVtYmVyIGFuZCBlbWFpbFxyXG4gICAgY29uc3Qgc3FsID0gJ1NFTEVDVCAqIEZST00gcmVnaXN0cmF0aW9ucyBXSEVSRSByZWdpc3RyYXRpb25fbnVtYmVyID0gPyBBTkQgZW1haWwgPSA/JztcclxuICAgIGNvbm5lY3Rpb24ucXVlcnkoc3FsLCBbcmVnaXN0cmF0aW9uX251bWJlciwgZW1haWxdLCAoZXJyLCByZXN1bHRzKSA9PiB7XHJcbiAgICAgICAgaWYgKGVyciB8fCByZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoYFxyXG4gICAgICAgICAgICAgICAgPGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCIvc3Bvb2t5LXRoZW1lLmNzc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0aXRsZT5ObyBSZWdpc3RyYXRpb24gRm91bmQ8L3RpdGxlPlxyXG4gICAgICAgICAgICAgICAgPC9oZWFkPlxyXG4gICAgICAgICAgICAgICAgPGgxPk5vIFJlZ2lzdHJhdGlvbiBGb3VuZDwvaDE+XHJcbiAgICAgICAgICAgICAgICA8cD5XZSBjb3VsZG4ndCBmaW5kIGEgcmVnaXN0cmF0aW9uIHdpdGggdGhhdCBudW1iZXIgYW5kIGVtYWlsLjwvcD5cclxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIvdmlldy5odG1sXCI+VHJ5IGFnYWluPC9hPlxyXG4gICAgICAgICAgICBgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHJlZ2lzdHJhdGlvbiA9IHJlc3VsdHNbMF07XHJcbiAgICAgICAgY29uc3QgbmFtZXNBcnJheSA9IHJlZ2lzdHJhdGlvbi5uYW1lcy5zcGxpdCgnLCAnKTtcclxuICAgICAgICBjb25zdCBhZ2VzQXJyYXkgPSByZWdpc3RyYXRpb24uYWdlcy5zcGxpdCgnLCAnKTtcclxuXHJcbiAgICAgICAgbGV0IHJlZ2lzdHJhdGlvbkRldGFpbHMgPSBgXHJcbiAgICAgICAgICAgIDxoZWFkPlxyXG4gICAgICAgICAgICAgICAgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCIvc3Bvb2t5LXRoZW1lLmNzc1wiPlxyXG4gICAgICAgICAgICAgICAgPHRpdGxlPk1vZGlmeSBSZWdpc3RyYXRpb248L3RpdGxlPlxyXG4gICAgICAgICAgICA8L2hlYWQ+XHJcbiAgICAgICAgICAgIDxoMj5SZWdpc3RyYXRpb24gRGV0YWlsczwvaDI+XHJcbiAgICAgICAgICAgIDxwPlJlZ2lzdHJhdGlvbiBOdW1iZXI6ICR7cmVnaXN0cmF0aW9uLnJlZ2lzdHJhdGlvbl9udW1iZXJ9PC9wPlxyXG4gICAgICAgICAgICA8cD5FbWFpbDogJHtyZWdpc3RyYXRpb24uZW1haWx9PC9wPlxyXG4gICAgICAgICAgICA8cD5UaW1lIFNsb3Q6ICR7cmVnaXN0cmF0aW9uLnRpbWVfc2xvdH08L3A+XHJcbiAgICAgICAgICAgIDxmb3JtIGlkPVwibW9kaWZ5LWZvcm1cIiBhY3Rpb249XCIvbW9kaWZ5LXJlZ2lzdHJhdGlvblwiIG1ldGhvZD1cIlBPU1RcIj5cclxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cInJlZ2lzdHJhdGlvbl9udW1iZXJcIiB2YWx1ZT1cIiR7cmVnaXN0cmF0aW9uLnJlZ2lzdHJhdGlvbl9udW1iZXJ9XCI+XHJcbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJlbWFpbFwiIHZhbHVlPVwiJHtyZWdpc3RyYXRpb24uZW1haWx9XCI+XHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgLy8gR2VuZXJhdGUgYXR0ZW5kZWUgZmllbGRzIGZvciBtb2RpZmljYXRpb25cclxuICAgICAgICBuYW1lc0FycmF5LmZvckVhY2goKG5hbWUsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvbkRldGFpbHMgKz0gYFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImF0dGVuZGVlXCIgaWQ9XCJhdHRlbmRlZS0ke2luZGV4ICsgMX1cIj5cclxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwibmFtZSR7aW5kZXggKyAxfVwiPk5hbWU6PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cIm5hbWUke2luZGV4ICsgMX1cIiBuYW1lPVwibmFtZXNbXVwiIHZhbHVlPVwiJHtuYW1lfVwiIHJlcXVpcmVkPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJhZ2Uke2luZGV4ICsgMX1cIj5BZ2U6PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPVwiYWdlJHtpbmRleCArIDF9XCIgbmFtZT1cImFnZXNbXVwiIHJlcXVpcmVkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMTYtMjBcIiAke2FnZXNBcnJheVtpbmRleF0gPT09ICcxNi0yMCcgPyAnc2VsZWN0ZWQnIDogJyd9PjE2LTIwPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIyMS0zMFwiICR7YWdlc0FycmF5W2luZGV4XSA9PT0gJzIxLTMwJyA/ICdzZWxlY3RlZCcgOiAnJ30+MjEtMzA8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjMxLTQwXCIgJHthZ2VzQXJyYXlbaW5kZXhdID09PSAnMzEtNDAnID8gJ3NlbGVjdGVkJyA6ICcnfT4zMS00MDwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiNDEtNTBcIiAke2FnZXNBcnJheVtpbmRleF0gPT09ICc0MS01MCcgPyAnc2VsZWN0ZWQnIDogJyd9PjQxLTUwPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCI1MStcIiAke2FnZXNBcnJheVtpbmRleF0gPT09ICc1MSsnID8gJ3NlbGVjdGVkJyA6ICcnfT41MSs8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBvbmNsaWNrPVwicmVtb3ZlQXR0ZW5kZWUoJHtpbmRleCArIDF9KVwiPlJlbW92ZTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEFkZCBcIlJlbW92ZSBBbGxcIiBidXR0b24gYW5kIHN1Ym1pdCBidXR0b25cclxuICAgICAgICByZWdpc3RyYXRpb25EZXRhaWxzICs9IGBcclxuICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIG9uY2xpY2s9XCJjb25maXJtUmVtb3ZlQWxsKClcIj5SZW1vdmUgQWxsPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnV0dG9uXCIgdHlwZT1cInN1Ym1pdFwiPlN1Ym1pdCBDaGFuZ2VzPC9idXR0b24+XHJcbiAgICAgICAgICAgIDwvZm9ybT5cclxuXHJcbiAgICAgICAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgICAgICAgICAvLyBGdW5jdGlvbiB0byByZW1vdmUgaW5kaXZpZHVhbCBhdHRlbmRlZXNcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZUF0dGVuZGVlKGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXR0ZW5kZWVFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F0dGVuZGVlLScgKyBpbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXR0ZW5kZWVFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIEZ1bmN0aW9uIHRvIGNvbmZpcm0gcmVtb3ZpbmcgYWxsIGF0dGVuZGVlc1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gY29uZmlybVJlbW92ZUFsbCgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhdHRlbmRlZUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmF0dGVuZGVlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhdHRlbmRlZUVsZW1lbnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIk5vIHJlZ2lzdHJhbnRzIHRvIHJlbW92ZS5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1lZCA9IGNvbmZpcm0oXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcmVtb3ZlIGFsbCByZWdpc3RyYW50cz9cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRlbmRlZUVsZW1lbnRzLmZvckVhY2goYXR0ZW5kZWUgPT4gYXR0ZW5kZWUucmVtb3ZlKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgLy8gUmV0dXJuIHRoZSByZWdpc3RyYXRpb24gZGV0YWlscyB0byB0aGUgdXNlclxyXG4gICAgICAgIHJlcy5zZW5kKHJlZ2lzdHJhdGlvbkRldGFpbHMpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuYXBwLnBvc3QoJy9tb2RpZnktcmVnaXN0cmF0aW9uJywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IHJlZ2lzdHJhdGlvbl9udW1iZXIsIGVtYWlsLCBuYW1lcywgYWdlcyB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgLy8gUXVlcnkgdG8gZmluZCB0aGUgZXhpc3RpbmcgcmVnaXN0cmF0aW9uIGJlZm9yZSBtYWtpbmcgY2hhbmdlc1xyXG4gICAgY29uc3Qgc3FsRmluZCA9ICdTRUxFQ1QgKiBGUk9NIHJlZ2lzdHJhdGlvbnMgV0hFUkUgcmVnaXN0cmF0aW9uX251bWJlciA9ID8gQU5EIGVtYWlsID0gPyc7XHJcbiAgICBjb25uZWN0aW9uLnF1ZXJ5KHNxbEZpbmQsIFtyZWdpc3RyYXRpb25fbnVtYmVyLCBlbWFpbF0sIChlcnIsIHJlc3VsdHMpID0+IHtcclxuICAgICAgICBpZiAoZXJyIHx8IHJlc3VsdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc2VuZChgXHJcbiAgICAgICAgICAgICAgICA8aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICA8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cIi9zcG9va3ktdGhlbWUuY3NzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRpdGxlPk5vIFJlZ2lzdHJhdGlvbiBGb3VuZDwvdGl0bGU+XHJcbiAgICAgICAgICAgICAgICA8L2hlYWQ+XHJcbiAgICAgICAgICAgICAgICA8aDE+Tm8gUmVnaXN0cmF0aW9uIEZvdW5kPC9oMT5cclxuICAgICAgICAgICAgICAgIDxwPldlIGNvdWxkbid0IGZpbmQgYSByZWdpc3RyYXRpb24gd2l0aCB0aGF0IG51bWJlciBhbmQgZW1haWwuPC9wPlxyXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIi92aWV3Lmh0bWxcIj5UcnkgYWdhaW48L2E+XHJcbiAgICAgICAgICAgIGApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcmVnaXN0cmF0aW9uID0gcmVzdWx0c1swXTtcclxuICAgICAgICBjb25zdCBleGlzdGluZ1JlZ2lzdHJhbnRDb3VudCA9IHJlZ2lzdHJhdGlvbi5uYW1lcyA/IHJlZ2lzdHJhdGlvbi5uYW1lcy5zcGxpdCgnLCAnKS5sZW5ndGggOiAwO1xyXG5cclxuICAgICAgICAvLyBJZiAnbmFtZXMnIGFycmF5IGlzIHVuZGVmaW5lZCBvciBlbXB0eSwgZGVsZXRlIHRoZSByZWdpc3RyYXRpb24gYW5kIGFkZCBzcG90cyBiYWNrIHRvIHRoZSB0aW1lIHNsb3RcclxuICAgICAgICBpZiAoIW5hbWVzIHx8IG5hbWVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBzcWxEZWxldGUgPSAnREVMRVRFIEZST00gcmVnaXN0cmF0aW9ucyBXSEVSRSByZWdpc3RyYXRpb25fbnVtYmVyID0gPyBBTkQgZW1haWwgPSA/JztcclxuICAgICAgICAgICAgY29ubmVjdGlvbi5xdWVyeShzcWxEZWxldGUsIFtyZWdpc3RyYXRpb25fbnVtYmVyLCBlbWFpbF0sIChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiL3Nwb29reS10aGVtZS5jc3NcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aXRsZT5SZW1vdmFsIEZhaWxlZDwvdGl0bGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxPkVycm9yPC9oMT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHA+VGhlcmUgd2FzIGFuIGlzc3VlIHJlbW92aW5nIHlvdXIgcmVnaXN0cmF0aW9uLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLjwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIi92aWV3Lmh0bWxcIj5HbyBiYWNrPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgIGApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIEFkZCBiYWNrIGFsbCBzcG90cyB3aGVuIHJlZ2lzdHJhdGlvbiBpcyByZW1vdmVkXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcWxVcGRhdGVTcG90cyA9ICdVUERBVEUgdGltZV9zbG90cyBTRVQgc3BvdHNfcmVtYWluaW5nID0gc3BvdHNfcmVtYWluaW5nICsgPyBXSEVSRSB0aW1lX3Nsb3QgPSA/JztcclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ucXVlcnkoc3FsVXBkYXRlU3BvdHMsIFtleGlzdGluZ1JlZ2lzdHJhbnRDb3VudCwgcmVnaXN0cmF0aW9uLnRpbWVfc2xvdF0sIChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc2VuZChgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cIi9zcG9va3ktdGhlbWUuY3NzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRpdGxlPkVycm9yIFVwZGF0aW5nPC90aXRsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5FcnJvciBVcGRhdGluZyBTcG90czwvaDE+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5UaGVyZSB3YXMgYW4gaXNzdWUgdXBkYXRpbmcgdGhlIGF2YWlsYWJsZSBzcG90cyBmb3IgdGhlIHRpbWUgc2xvdC48L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiL1wiPkdvIGJhY2sgdG8gdGhlIGhvbWUgcGFnZTwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXMuc2VuZChgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCIvc3Bvb2t5LXRoZW1lLmNzc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRpdGxlPlJlZ2lzdHJhdGlvbiBSZW1vdmVkPC90aXRsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9oZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDE+UmVnaXN0cmF0aW9uIFJlbW92ZWQ8L2gxPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cD5Zb3VyIHJlZ2lzdHJhdGlvbiBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgcmVtb3ZlZC48L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIvXCI+R28gYmFjayB0byB0aGUgaG9tZSBwYWdlPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgIGApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgZGlmZmVyZW5jZSBpbiByZWdpc3RyYW50IGNvdW50IChpZiBhbnkgcmVnaXN0cmFudHMgd2VyZSBhZGRlZCBvciByZW1vdmVkKVxyXG4gICAgICAgICAgICBjb25zdCBuZXdSZWdpc3RyYW50Q291bnQgPSBuYW1lcy5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGRpZmZlcmVuY2UgPSBleGlzdGluZ1JlZ2lzdHJhbnRDb3VudCAtIG5ld1JlZ2lzdHJhbnRDb3VudDtcclxuXHJcbiAgICAgICAgICAgIC8vIFNhZmVndWFyZCBmb3IgdW5kZWZpbmVkIG5hbWVzIG9yIGFnZXMgd2hlbiBqb2luaW5nXHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWVzU3RyaW5nID0gbmFtZXMgJiYgbmFtZXMubGVuZ3RoID8gbmFtZXMuam9pbignLCAnKSA6ICcnO1xyXG4gICAgICAgICAgICBjb25zdCBhZ2VzU3RyaW5nID0gYWdlcyAmJiBhZ2VzLmxlbmd0aCA/IGFnZXMuam9pbignLCAnKSA6ICcnO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc3FsVXBkYXRlID0gYFxyXG4gICAgICAgICAgICAgICAgVVBEQVRFIHJlZ2lzdHJhdGlvbnNcclxuICAgICAgICAgICAgICAgIFNFVCBuYW1lcyA9ID8sIGFnZXMgPSA/XHJcbiAgICAgICAgICAgICAgICBXSEVSRSByZWdpc3RyYXRpb25fbnVtYmVyID0gPyBBTkQgZW1haWwgPSA/XHJcbiAgICAgICAgICAgIGA7XHJcblxyXG4gICAgICAgICAgICBjb25uZWN0aW9uLnF1ZXJ5KHNxbFVwZGF0ZSwgW25hbWVzU3RyaW5nLCBhZ2VzU3RyaW5nLCByZWdpc3RyYXRpb25fbnVtYmVyLCBlbWFpbF0sIChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiL3Nwb29reS10aGVtZS5jc3NcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aXRsZT5VcGRhdGUgRmFpbGVkPC90aXRsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9oZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDE+VXBkYXRlIEZhaWxlZDwvaDE+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPlRoZXJlIHdhcyBhbiBpc3N1ZSB1cGRhdGluZyB5b3VyIHJlZ2lzdHJhdGlvbi4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci48L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIvdmlldy5odG1sXCI+R28gYmFjazwvYT5cclxuICAgICAgICAgICAgICAgICAgICBgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgc3BvdHMgcmVtYWluaW5nIGJhc2VkIG9uIHRoZSBkaWZmZXJlbmNlIGluIHJlZ2lzdHJhbnRzXHJcbiAgICAgICAgICAgICAgICBpZiAoZGlmZmVyZW5jZSAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNxbFVwZGF0ZVNwb3RzID0gJ1VQREFURSB0aW1lX3Nsb3RzIFNFVCBzcG90c19yZW1haW5pbmcgPSBzcG90c19yZW1haW5pbmcgKyA/IFdIRVJFIHRpbWVfc2xvdCA9ID8nO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ucXVlcnkoc3FsVXBkYXRlU3BvdHMsIFtkaWZmZXJlbmNlLCByZWdpc3RyYXRpb24udGltZV9zbG90XSwgKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cIi9zcG9va3ktdGhlbWUuY3NzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aXRsZT5VcGRhdGUgRmFpbGVkPC90aXRsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2hlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPkVycm9yIFVwZGF0aW5nIFNwb3RzPC9oMT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5UaGVyZSB3YXMgYW4gaXNzdWUgdXBkYXRpbmcgdGhlIGF2YWlsYWJsZSBzcG90cyBmb3IgdGhlIHRpbWUgc2xvdC48L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIi9cIj5HbyBiYWNrIHRvIHRoZSBob21lIHBhZ2U8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnNlbmQoYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCIvc3Bvb2t5LXRoZW1lLmNzc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aXRsZT5SZWdpc3RyYXRpb24gVXBkYXRlZDwvdGl0bGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2hlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+UmVnaXN0cmF0aW9uIFVwZGF0ZWQ8L2gxPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+WW91ciByZWdpc3RyYXRpb24gaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IHVwZGF0ZWQuPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIi9cIj5HbyBiYWNrIHRvIHRoZSBob21lIHBhZ2U8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXMuc2VuZChgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCIvc3Bvb2t5LXRoZW1lLmNzc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRpdGxlPlJlZ2lzdHJhdGlvbiBVcGRhdGVkPC90aXRsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9oZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDE+UmVnaXN0cmF0aW9uIFVwZGF0ZWQ8L2gxPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cD5Zb3VyIHJlZ2lzdHJhdGlvbiBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgdXBkYXRlZC48L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIvXCI+R28gYmFjayB0byB0aGUgaG9tZSBwYWdlPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgIGApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4vL0FETUlOIHBhZ2VcclxuY29uc3QgYWRtaW5QYXNzd29yZCA9ICdTTEVFUDR0Ryc7ICAvLyBSZXBsYWNlIHdpdGggeW91ciBhY3R1YWwgcGFzc3dvcmRcclxuXHJcbi8vIE1pZGRsZXdhcmUgdG8gcHJvdGVjdCB0aGUgYWRtaW4gcm91dGVcclxuZnVuY3Rpb24gY2hlY2tBZG1pbkF1dGgocmVxLCByZXMsIG5leHQpIHtcclxuICAgIGNvbnN0IGF1dGggPSByZXEuaGVhZGVyc1snYXV0aG9yaXphdGlvbiddO1xyXG5cclxuICAgIGlmICghYXV0aCkge1xyXG4gICAgICAgIHJlcy5zZXRIZWFkZXIoJ1dXVy1BdXRoZW50aWNhdGUnLCAnQmFzaWMgcmVhbG09XCJBZG1pbiBBcmVhXCInKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLnNlbmQoJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkLicpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGVuY29kZWQgPSBhdXRoLnNwbGl0KCcgJylbMV07XHJcbiAgICBjb25zdCBkZWNvZGVkID0gQnVmZmVyLmZyb20oZW5jb2RlZCwgJ2Jhc2U2NCcpLnRvU3RyaW5nKCd1dGYtOCcpO1xyXG4gICAgY29uc3QgW3VzZXJuYW1lLCBwYXNzd29yZF0gPSBkZWNvZGVkLnNwbGl0KCc6Jyk7XHJcblxyXG4gICAgaWYgKHVzZXJuYW1lID09PSAnYWRtaW4nICYmIHBhc3N3b3JkID09PSBhZG1pblBhc3N3b3JkKSB7XHJcbiAgICAgICAgcmV0dXJuIG5leHQoKTtcclxuICAgIH1cclxuXHJcbiAgICByZXMuc2V0SGVhZGVyKCdXV1ctQXV0aGVudGljYXRlJywgJ0Jhc2ljIHJlYWxtPVwiQWRtaW4gQXJlYVwiJyk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLnNlbmQoJ0F1dGhlbnRpY2F0aW9uIGZhaWxlZC4nKTtcclxufVxyXG5cclxuYXBwLmdldCgnL2FkbWluJywgY2hlY2tBZG1pbkF1dGgsIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3Qgc3FsID0gJ1NFTEVDVCAqIEZST00gcmVnaXN0cmF0aW9ucyBPUkRFUiBCWSB0aW1lX3Nsb3QnO1xyXG5cclxuICAgIGNvbm5lY3Rpb24ucXVlcnkoc3FsLCAoZXJyLCByZXN1bHRzKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoJ0Vycm9yIHJldHJpZXZpbmcgcmVnaXN0cmF0aW9ucy4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBIVE1MIHRhYmxlIGZvciB0aGUgcmVnaXN0cmF0aW9uc1xyXG4gICAgICAgIGxldCBodG1sID0gYFxyXG4gICAgICAgICAgICA8aDE+QWRtaW46IFZpZXcgUmVnaXN0cmF0aW9uczwvaDE+XHJcbiAgICAgICAgICAgIDx0YWJsZSBib3JkZXI9XCIxXCI+XHJcbiAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoPlJlZ2lzdHJhdGlvbiBOdW1iZXI8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0aD5FbWFpbDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoPlRpbWUgU2xvdDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoPk5hbWVzPC90aD5cclxuICAgICAgICAgICAgICAgICAgICA8dGg+QWdlczwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoPkFjdGlvbjwvdGg+XHJcbiAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIHJlc3VsdHMuZm9yRWFjaChyZWdpc3RyYXRpb24gPT4ge1xyXG4gICAgICAgICAgICBodG1sICs9IGBcclxuICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHtyZWdpc3RyYXRpb24ucmVnaXN0cmF0aW9uX251bWJlcn08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD4ke3JlZ2lzdHJhdGlvbi5lbWFpbH08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD4ke3JlZ2lzdHJhdGlvbi50aW1lX3Nsb3R9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHtyZWdpc3RyYXRpb24ubmFtZXN9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHtyZWdpc3RyYXRpb24uYWdlc308L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGZvcm0gYWN0aW9uPVwiL2FkbWluL2RlbGV0ZVwiIG1ldGhvZD1cIlBPU1RcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cInJlZ2lzdHJhdGlvbl9udW1iZXJcIiB2YWx1ZT1cIiR7cmVnaXN0cmF0aW9uLnJlZ2lzdHJhdGlvbl9udW1iZXJ9XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiPlJlbW92ZTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGh0bWwgKz0gJzwvdGFibGU+JztcclxuICAgICAgICByZXMuc2VuZChodG1sKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmFwcC5wb3N0KCcvcmVnaXN0ZXInLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgZW1haWwsIHJlZ2lzdHJhdGlvbk51bWJlciwgdGltZVNsb3QsIG5hbWVzLCB2aWV3VXJsIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHNlbmRSZWdpc3RyYXRpb25FbWFpbChlbWFpbCwgcmVnaXN0cmF0aW9uTnVtYmVyLCB0aW1lU2xvdCwgbmFtZXMsIHZpZXdVcmwpO1xyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKCdSZWdpc3RyYXRpb24gc3VjY2Vzc2Z1bCwgZW1haWwgc2VudC4nKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoJ1JlZ2lzdHJhdGlvbiBzdWNjZXNzZnVsLCBidXQgZW1haWwgZmFpbGVkLicpO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmFwcC5wb3N0KCcvYWRtaW4vZGVsZXRlJywgY2hlY2tBZG1pbkF1dGgsIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgcmVnaXN0cmF0aW9uTnVtYmVyID0gcmVxLmJvZHkucmVnaXN0cmF0aW9uX251bWJlcjtcclxuXHJcbiAgICAvLyBSZXRyaWV2ZSB0aGUgcmVnaXN0cmF0aW9uIGRldGFpbHNcclxuICAgIGNvbnN0IHNxbFNlbGVjdCA9ICdTRUxFQ1QgKiBGUk9NIHJlZ2lzdHJhdGlvbnMgV0hFUkUgcmVnaXN0cmF0aW9uX251bWJlciA9ID8nO1xyXG5cclxuICAgIGNvbm5lY3Rpb24ucXVlcnkoc3FsU2VsZWN0LCBbcmVnaXN0cmF0aW9uTnVtYmVyXSwgKGVyciwgcmVzdWx0cykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIgfHwgcmVzdWx0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKCdFcnJvciBmaW5kaW5nIHRoZSByZWdpc3RyYXRpb24uJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCByZWdpc3RyYXRpb24gPSByZXN1bHRzWzBdO1xyXG4gICAgICAgIGNvbnN0IG51bWJlck9mUGVvcGxlID0gcmVnaXN0cmF0aW9uLm5hbWVzLnNwbGl0KCcsICcpLmxlbmd0aDsgIC8vIFNwbGl0IGJ5IGNvbW1hIHRvIGNvdW50IG5hbWVzXHJcblxyXG4gICAgICAgIC8vIERlbGV0ZSB0aGUgcmVnaXN0cmF0aW9uIGZyb20gdGhlIGRhdGFiYXNlXHJcbiAgICAgICAgY29uc3Qgc3FsRGVsZXRlID0gJ0RFTEVURSBGUk9NIHJlZ2lzdHJhdGlvbnMgV0hFUkUgcmVnaXN0cmF0aW9uX251bWJlciA9ID8nO1xyXG4gICAgICAgIGNvbm5lY3Rpb24ucXVlcnkoc3FsRGVsZXRlLCBbcmVnaXN0cmF0aW9uTnVtYmVyXSwgKGVycikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoJ0Vycm9yIGRlbGV0aW5nIHRoZSByZWdpc3RyYXRpb24uJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBiYWNrIHRoZSBudW1iZXIgb2Ygc3BvdHMgdG8gdGhlIHRpbWUgc2xvdFxyXG4gICAgICAgICAgICBjb25zdCBzcWxVcGRhdGVTcG90cyA9ICdVUERBVEUgdGltZV9zbG90cyBTRVQgc3BvdHNfcmVtYWluaW5nID0gc3BvdHNfcmVtYWluaW5nICsgPyBXSEVSRSB0aW1lX3Nsb3QgPSA/JztcclxuICAgICAgICAgICAgY29ubmVjdGlvbi5xdWVyeShzcWxVcGRhdGVTcG90cywgW251bWJlck9mUGVvcGxlLCByZWdpc3RyYXRpb24udGltZV9zbG90XSwgKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc2VuZCgnRXJyb3IgdXBkYXRpbmcgc3BvdHMuJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmVzLnJlZGlyZWN0KCcvYWRtaW4nKTsgIC8vIFJlZnJlc2ggdGhlIGFkbWluIHBhZ2UgYWZ0ZXIgZGVsZXRpb25cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4vLyBTZXJ2ZSB0aGUgbGFuZGluZyBhbmQgcmVnaXN0cmF0aW9uIHBhZ2VzXHJcbmFwcC5nZXQoJy8nLCAocmVxLCByZXMpID0+IHtcclxuICAgIHJlcy5zZW5kRmlsZShfX2Rpcm5hbWUgKyAnL3B1YmxpYy9pbmRleC5odG1sJyk7XHJcbn0pO1xyXG5cclxuYXBwLmdldCgnL3JlZ2lzdGVyLmh0bWwnLCAocmVxLCByZXMpID0+IHtcclxuICAgIHJlcy5zZW5kRmlsZShfX2Rpcm5hbWUgKyAnL3B1YmxpYy9yZWdpc3Rlci5odG1sJyk7XHJcbn0pO1xyXG5cclxuYXBwLmdldCgnL3Nwb3RzJywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBzcWwgPSAnU0VMRUNUIHRpbWVfc2xvdCwgc3BvdHNfcmVtYWluaW5nIEZST00gdGltZV9zbG90cyc7XHJcbiAgICBjb25uZWN0aW9uLnF1ZXJ5KHNxbCwgKGVyciwgcmVzdWx0cykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdFcnJvciBmZXRjaGluZyBhdmFpbGFibGUgc3BvdHMnIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXMuanNvbihyZXN1bHRzKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8vIEhhbmRsZSBmb3JtIHN1Ym1pc3Npb25cclxuYXBwLnBvc3QoJy9zdWJtaXQnLCAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgdGltZVNsb3QsIGVtYWlsLCBuYW1lcywgYWdlcyB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCByZWdpc3RyYXRpb25OdW1iZXIgPSBnZW5lcmF0ZVJlZ2lzdHJhdGlvbk51bWJlcigpO1xyXG5cclxuICAgIC8vIFN0ZXAgMTogQ2hlY2sgdGhlIHJlbWFpbmluZyBzcG90cyBmcm9tIHRoZSBkYXRhYmFzZVxyXG4gICAgY29uc3QgY2hlY2tTcG90c1NxbCA9ICdTRUxFQ1Qgc3BvdHNfcmVtYWluaW5nIEZST00gdGltZV9zbG90cyBXSEVSRSB0aW1lX3Nsb3QgPSA/JztcclxuICAgIGNvbm5lY3Rpb24ucXVlcnkoY2hlY2tTcG90c1NxbCwgW3RpbWVTbG90XSwgKGVyciwgcmVzdWx0cykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIgfHwgcmVzdWx0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2hlY2tpbmcgc3BvdHM6JywgZXJyKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKGBcclxuICAgICAgICAgICAgICAgIDxoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiL3Nwb29reS10aGVtZS5jc3NcIj5cclxuICAgICAgICAgICAgICAgICAgICA8dGl0bGU+UmVnaXN0cmF0aW9uIEZhaWxlZDwvdGl0bGU+XHJcbiAgICAgICAgICAgICAgICA8L2hlYWQ+XHJcbiAgICAgICAgICAgICAgICA8aDE+UmVnaXN0cmF0aW9uIEZhaWxlZDwvaDE+XHJcbiAgICAgICAgICAgICAgICA8cD5Db3VsZCBub3QgcmV0cmlldmUgYXZhaWxhYmxlIHNwb3RzLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLjwvcD5cclxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIvcmVnaXN0ZXIuaHRtbFwiPkdvIGJhY2s8L2E+XHJcbiAgICAgICAgICAgIGApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc3BvdHNSZW1haW5pbmcgPSByZXN1bHRzWzBdLnNwb3RzX3JlbWFpbmluZztcclxuXHJcbiAgICAgICAgLy8gU3RlcCAyOiBDaGVjayBpZiB0aGVyZSBhcmUgZW5vdWdoIHNwb3RzXHJcbiAgICAgICAgaWYgKHNwb3RzUmVtYWluaW5nIDwgbmFtZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc2VuZChgXHJcbiAgICAgICAgICAgICAgICA8aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICA8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cIi9zcG9va3ktdGhlbWUuY3NzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRpdGxlPlJlZ2lzdHJhdGlvbiBGYWlsZWQ8L3RpdGxlPlxyXG4gICAgICAgICAgICAgICAgPC9oZWFkPlxyXG4gICAgICAgICAgICAgICAgPGgxPlJlZ2lzdHJhdGlvbiBGYWlsZWQ8L2gxPlxyXG4gICAgICAgICAgICAgICAgPHA+U29ycnksIHRoZXJlIGFyZW4ndCBlbm91Z2ggc3BvdHMgbGVmdCBmb3IgdGhlIHNlbGVjdGVkIHRpbWUgc2xvdCAoJHt0aW1lU2xvdH0pLjwvcD5cclxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIvcmVnaXN0ZXIuaHRtbFwiPkdvIGJhY2sgYW5kIHRyeSBhbm90aGVyIHNsb3Q8L2E+XHJcbiAgICAgICAgICAgIGApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU3RlcCAzOiBEZWR1Y3QgdGhlIG51bWJlciBvZiByZWdpc3RlcmVkIHBlb3BsZSBmcm9tIHRoZSBhdmFpbGFibGUgc3BvdHNcclxuICAgICAgICBjb25zdCB1cGRhdGVTcG90c1NxbCA9ICdVUERBVEUgdGltZV9zbG90cyBTRVQgc3BvdHNfcmVtYWluaW5nID0gc3BvdHNfcmVtYWluaW5nIC0gPyBXSEVSRSB0aW1lX3Nsb3QgPSA/JztcclxuICAgICAgICBjb25uZWN0aW9uLnF1ZXJ5KHVwZGF0ZVNwb3RzU3FsLCBbbmFtZXMubGVuZ3RoLCB0aW1lU2xvdF0sIChlcnIpID0+IHtcclxuICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgc3BvdHM6JywgZXJyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc2VuZChgXHJcbiAgICAgICAgICAgICAgICAgICAgPGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiL3Nwb29reS10aGVtZS5jc3NcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRpdGxlPlJlZ2lzdHJhdGlvbiBGYWlsZWQ8L3RpdGxlPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvaGVhZD5cclxuICAgICAgICAgICAgICAgICAgICA8aDE+UmVnaXN0cmF0aW9uIEZhaWxlZDwvaDE+XHJcbiAgICAgICAgICAgICAgICAgICAgPHA+Q291bGQgbm90IHVwZGF0ZSBhdmFpbGFibGUgc3BvdHMuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIvcmVnaXN0ZXIuaHRtbFwiPkdvIGJhY2s8L2E+XHJcbiAgICAgICAgICAgICAgICBgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gU3RlcCA0OiBTYXZlIHJlZ2lzdHJhdGlvbiB0byB0aGUgTXlTUUwgZGF0YWJhc2VcclxuICAgICAgICAgICAgY29uc3Qgc3FsID0gYFxyXG4gICAgICAgICAgICAgICAgSU5TRVJUIElOVE8gcmVnaXN0cmF0aW9ucyAocmVnaXN0cmF0aW9uX251bWJlciwgZW1haWwsIHRpbWVfc2xvdCwgbmFtZXMsIGFnZXMpXHJcbiAgICAgICAgICAgICAgICBWQUxVRVMgKD8sID8sID8sID8sID8pXHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWVzU3RyaW5nID0gbmFtZXMuam9pbignLCAnKTtcclxuICAgICAgICAgICAgY29uc3QgYWdlc1N0cmluZyA9IGFnZXMuam9pbignLCAnKTtcclxuXHJcbiAgICAgICAgICAgIGNvbm5lY3Rpb24ucXVlcnkoc3FsLCBbcmVnaXN0cmF0aW9uTnVtYmVyLCBlbWFpbCwgdGltZVNsb3QsIG5hbWVzU3RyaW5nLCBhZ2VzU3RyaW5nXSwgKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIGVycm9yOicsIGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKGBcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cIi9zcG9va3ktdGhlbWUuY3NzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGl0bGU+UmVnaXN0cmF0aW9uIEZhaWxlZDwvdGl0bGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlJlZ2lzdHJhdGlvbiBGYWlsZWQ8L2gxPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cD5UaGVyZSB3YXMgYW4gaXNzdWUgc2F2aW5nIHlvdXIgcmVnaXN0cmF0aW9uLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLjwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIi9yZWdpc3Rlci5odG1sXCI+R28gYmFjazwvYT5cclxuICAgICAgICAgICAgICAgICAgICBgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvL1NlbmQgZW1haWxcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZpZXdVcmwgPSBgaHR0cHM6Ly95b3VyLWRvbWFpbi5jb20vdmlldy1yZWdpc3RyYXRpb24/bnVtYmVyPSR7cmVnaXN0cmF0aW9uTnVtYmVyfWA7XHJcbiAgICAgICAgICAgICAgICBzZW5kUmVnaXN0cmF0aW9uRW1haWwoZW1haWwsIHJlZ2lzdHJhdGlvbk51bWJlciwgdGltZVNsb3QsIG5hbWVzLCB2aWV3VXJsKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gYSBjb25maXJtYXRpb25cclxuICAgICAgICAgICAgICAgIHJlcy5zZW5kKGBcclxuICAgICAgICAgICAgICAgICAgICA8aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCIvc3Bvb2t5LXRoZW1lLmNzc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGl0bGU+VGhhbmsgeW91ITwvdGl0bGU+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9oZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgIDxoMT5UaGFuayB5b3UgZm9yIHJlZ2lzdGVyaW5nITwvaDE+XHJcbiAgICAgICAgICAgICAgICAgICAgPHA+WW91IGhhdmUgcmVnaXN0ZXJlZCAke25hbWVzLmxlbmd0aH0gcGVyc29uKHMpIGZvciB0aGUgJHt0aW1lU2xvdH0gdGltZSBzbG90LjwvcD5cclxuICAgICAgICAgICAgICAgICAgICA8cD5Zb3VyIHJlZ2lzdHJhdGlvbiBudW1iZXIgaXMgPHN0cm9uZz4ke3JlZ2lzdHJhdGlvbk51bWJlcn08L3N0cm9uZz4uIFBsZWFzZSBrZWVwIHRoaXMgbnVtYmVyIGZvciBmdXR1cmUgcmVmZXJlbmNlLjwvcD5cclxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiL1wiPkdvIGJhY2sgdG8gdGhlIGhvbWUgcGFnZTwvYT5cclxuICAgICAgICAgICAgICAgIGApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8vIFN0YXJ0IHNlcnZlclxyXG5jb25zdCBQT1JUID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAwO1xyXG5hcHAubGlzdGVuKFBPUlQsICgpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGBTZXJ2ZXIgcnVubmluZyBvbiBwb3J0ICR7UE9SVH1gKTtcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUMsVUFBVSxHQUFHRCxPQUFPLENBQUMsYUFBYSxDQUFDO0FBQ3pDLE1BQU1FLEtBQUssR0FBR0YsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUMvQixNQUFNRyxNQUFNLEdBQUdILE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFFO0FBQ25DLE1BQU1JLFVBQVUsR0FBR0osT0FBTyxDQUFDLFlBQVksQ0FBQztBQUN4QyxNQUFNSyxNQUFNLEdBQUdMLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFDaEMsTUFBTU0sSUFBSSxHQUFHTixPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzVCLE1BQU1PLEdBQUcsR0FBR1IsT0FBTyxDQUFDLENBQUM7QUFFckJRLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDUCxVQUFVLENBQUNRLFVBQVUsQ0FBQztFQUFFQyxRQUFRLEVBQUU7QUFBSyxDQUFDLENBQUMsQ0FBQztBQUNsREgsR0FBRyxDQUFDQyxHQUFHLENBQUNULE9BQU8sQ0FBQ1ksTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ2pDSixHQUFHLENBQUNDLEdBQUcsQ0FBQ1QsT0FBTyxDQUFDYSxJQUFJLENBQUMsQ0FBQyxDQUFDOztBQUV2QjtBQUNBLE1BQU1DLFVBQVUsR0FBR1gsS0FBSyxDQUFDWSxnQkFBZ0IsQ0FBQztFQUN0Q0MsSUFBSSxFQUFFLGVBQWU7RUFBRztFQUN4QkMsSUFBSSxFQUFFLE1BQU07RUFDWkMsSUFBSSxFQUFFLE9BQU87RUFDYkMsUUFBUSxFQUFFLFVBQVU7RUFDcEJDLFFBQVEsRUFBRTtBQUNkLENBQUMsQ0FBQztBQUVGTixVQUFVLENBQUNPLE9BQU8sQ0FBRUMsR0FBRyxJQUFLO0VBQ3hCLElBQUlBLEdBQUcsRUFBRTtJQUNMQyxPQUFPLENBQUNDLEtBQUssQ0FBQyw0QkFBNEIsRUFBRUYsR0FBRyxDQUFDRyxLQUFLLENBQUM7SUFDdEQ7RUFDSjtFQUNBRixPQUFPLENBQUNHLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQztBQUNyQyxDQUFDLENBQUM7QUFFRlosVUFBVSxDQUFDYSxLQUFLLENBQUMsMEJBQTBCLEVBQUUsQ0FBQ0wsR0FBRyxFQUFFTSxPQUFPLEtBQUs7RUFDM0QsSUFBSU4sR0FBRyxFQUFFO0lBQ0xDLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDLHVCQUF1QixFQUFFRixHQUFHLENBQUNHLEtBQUssQ0FBQztFQUNyRCxDQUFDLE1BQU07SUFDSEYsT0FBTyxDQUFDRyxHQUFHLENBQUMsa0NBQWtDLEVBQUVFLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQ0MsUUFBUSxDQUFDO0VBQ3hFO0FBQ0osQ0FBQyxDQUFDO0FBRUYsTUFBTUMsV0FBVyxHQUFHekIsVUFBVSxDQUFDMEIsZUFBZSxDQUFDO0VBQzNDZixJQUFJLEVBQUUsb0JBQW9CO0VBQzFCQyxJQUFJLEVBQUUsR0FBRztFQUNUZSxNQUFNLEVBQUUsS0FBSztFQUFFO0VBQ2ZDLElBQUksRUFBRTtJQUNGZixJQUFJLEVBQUUsK0JBQStCO0lBQUU7SUFDdkNnQixJQUFJLEVBQUUsa0JBQWtCLENBQUM7RUFDN0IsQ0FBQzs7RUFDREMsR0FBRyxFQUFFO0lBQ0RDLGtCQUFrQixFQUFFLEtBQUssQ0FBQztFQUM5QjtBQUNKLENBQUMsQ0FBQzs7QUFFRixlQUFlQyxxQkFBcUJBLENBQUNDLEtBQUssRUFBRUMsa0JBQWtCLEVBQUVDLFFBQVEsRUFBRUMsS0FBSyxFQUFFQyxPQUFPLEVBQUU7RUFDdEY7RUFDQSxNQUFNQyxTQUFTLEdBQUcsTUFBTUMsY0FBYyxDQUFDTCxrQkFBa0IsRUFBRUQsS0FBSyxDQUFDO0VBQ2pFLE1BQU1PLFVBQVUsR0FBSSxHQUFFTixrQkFBbUIsSUFBR0QsS0FBTSxFQUFDO0VBQ25ELE1BQU1RLFlBQVksR0FBRyxNQUFNeEMsTUFBTSxDQUFDeUMsUUFBUSxDQUFDRixVQUFVLENBQUM7RUFDdER0QixPQUFPLENBQUNHLEdBQUcsQ0FBQ2lCLFNBQVMsQ0FBQzs7RUFFdEI7RUFDQSxNQUFNSyxZQUFZLEdBQUk7QUFDMUI7QUFDQTtBQUNBLHdCQUF3QlIsUUFBUztBQUNqQyxpQ0FBaUNDLEtBQUssQ0FBQ1EsSUFBSSxDQUFDLElBQUksQ0FBRTtBQUNsRCxnRUFBZ0VQLE9BQVE7QUFDeEU7QUFDQTtBQUNBLEtBQUs7O0VBRUQ7RUFDQSxNQUFNUSxXQUFXLEdBQUc7SUFDaEJDLElBQUksRUFBRSwrQkFBK0I7SUFDckNDLEVBQUUsRUFBRWQsS0FBSztJQUNUZSxPQUFPLEVBQUUsOENBQThDO0lBQ3ZEQyxJQUFJLEVBQUVOLFlBQVk7SUFDbEJPLFdBQVcsRUFBRSxDQUFDO01BQ1pDLFFBQVEsRUFBRSxZQUFZO01BQ3RCQyxPQUFPLEVBQUVYLFlBQVk7TUFDckJZLEdBQUcsRUFBRSxRQUFRLENBQUU7SUFDakIsQ0FBQztFQUNMLENBQUM7O0VBRUQ7RUFDQTVCLFdBQVcsQ0FBQzZCLFFBQVEsQ0FBQ1QsV0FBVyxFQUFFLENBQUMxQixLQUFLLEVBQUVvQyxJQUFJLEtBQUs7SUFDL0MsSUFBSXBDLEtBQUssRUFBRTtNQUNQRCxPQUFPLENBQUNDLEtBQUssQ0FBQyxzQkFBc0IsRUFBRUEsS0FBSyxDQUFDO0lBQ2hELENBQUMsTUFBTTtNQUNIRCxPQUFPLENBQUNHLEdBQUcsQ0FBQyxjQUFjLEdBQUdrQyxJQUFJLENBQUNDLFFBQVEsQ0FBQztJQUMvQztFQUNKLENBQUMsQ0FBQztBQUNOO0FBRUEsZUFBZWpCLGNBQWNBLENBQUNMLGtCQUFrQixFQUFFRCxLQUFLLEVBQUU7RUFDdkQsSUFBSTtJQUNGLE1BQU1PLFVBQVUsR0FBSSxHQUFFTixrQkFBbUIsSUFBR0QsS0FBTSxFQUFDLENBQUMsQ0FBQztJQUNyRCxNQUFNSyxTQUFTLEdBQUcsTUFBTXJDLE1BQU0sQ0FBQ3dELFNBQVMsQ0FBQ2pCLFVBQVUsQ0FBQyxDQUFDLENBQUM7SUFDdEQsT0FBT0YsU0FBUztFQUNsQixDQUFDLENBQUMsT0FBT3JCLEdBQUcsRUFBRTtJQUNaQyxPQUFPLENBQUNDLEtBQUssQ0FBQyw0QkFBNEIsRUFBRUYsR0FBRyxDQUFDO0lBQ2hELE1BQU1BLEdBQUc7RUFDWDtBQUNGO0FBRUFkLEdBQUcsQ0FBQ3VELEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDaENBLEdBQUcsQ0FBQ0MsUUFBUSxDQUFDM0QsSUFBSSxDQUFDMEMsSUFBSSxDQUFDa0IsU0FBUyxFQUFFLDJCQUEyQixDQUFDLENBQUM7QUFDakUsQ0FBQyxDQUFDOztBQUVGO0FBQ0EzRCxHQUFHLENBQUM0RCxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUNKLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ2pDLE1BQU07SUFBRTFCLGtCQUFrQjtJQUFFRDtFQUFNLENBQUMsR0FBRzBCLEdBQUcsQ0FBQ0ssSUFBSTs7RUFFOUM7RUFDQTs7RUFFQTtFQUNBLE1BQU1DLGNBQWMsR0FBRztJQUNyQi9CLGtCQUFrQixFQUFFLFFBQVE7SUFDNUJELEtBQUssRUFBRSxrQkFBa0I7SUFDekJpQyxJQUFJLEVBQUUsVUFBVTtJQUNoQi9CLFFBQVEsRUFBRTtFQUNaLENBQUM7O0VBRUQ7RUFDQSxJQUFJRCxrQkFBa0IsS0FBSytCLGNBQWMsQ0FBQy9CLGtCQUFrQixJQUFJRCxLQUFLLEtBQUtnQyxjQUFjLENBQUNoQyxLQUFLLEVBQUU7SUFDOUYyQixHQUFHLENBQUNPLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQzNELElBQUksQ0FBQztNQUNuQjRELE9BQU8sRUFBRSxJQUFJO01BQ2JDLE9BQU8sRUFBRSxtQkFBbUI7TUFDNUJDLFVBQVUsRUFBRUw7SUFDZCxDQUFDLENBQUM7RUFDSixDQUFDLE1BQU07SUFDTEwsR0FBRyxDQUFDTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMzRCxJQUFJLENBQUM7TUFDbkI0RCxPQUFPLEVBQUUsS0FBSztNQUNkQyxPQUFPLEVBQUU7SUFDWCxDQUFDLENBQUM7RUFDSjtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBLElBQUlFLGNBQWMsR0FBRztFQUNqQixTQUFTLEVBQUUsRUFBRTtFQUNiLFNBQVMsRUFBRSxFQUFFO0VBQ2IsU0FBUyxFQUFFLEVBQUU7RUFDYixTQUFTLEVBQUUsRUFBRTtFQUNiLFNBQVMsRUFBRSxFQUFFO0VBQ2IsU0FBUyxFQUFFLEVBQUU7RUFDYixTQUFTLEVBQUUsRUFBRTtFQUNiLFNBQVMsRUFBRSxFQUFFO0VBQ2IsU0FBUyxFQUFFLEVBQUU7RUFDYixTQUFTLEVBQUUsRUFBRTtFQUNiLFNBQVMsRUFBRSxFQUFFO0VBQ2IsU0FBUyxFQUFFO0FBQ2YsQ0FBQztBQUVELFNBQVNDLDBCQUEwQkEsQ0FBQSxFQUFHO0VBQ2xDLE1BQU1DLEdBQUcsR0FBRyxJQUFJQyxJQUFJLENBQUMsQ0FBQztFQUN0QixNQUFNQyxHQUFHLEdBQUdDLE1BQU0sQ0FBQ0gsR0FBRyxDQUFDSSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUNDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBTTtFQUN6RCxNQUFNQyxLQUFLLEdBQUdILE1BQU0sQ0FBQ0gsR0FBRyxDQUFDTyxRQUFRLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDRixRQUFRLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDM0QsTUFBTUcsSUFBSSxHQUFHTCxNQUFNLENBQUNILEdBQUcsQ0FBQ1MsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFRO0VBQ3pELE1BQU1DLGdCQUFnQixHQUFHQyxJQUFJLENBQUNDLEtBQUssQ0FBQyxJQUFJLEdBQUdELElBQUksQ0FBQ0UsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUM7RUFDaEUsT0FBUSxNQUFLWixHQUFJLEdBQUVJLEtBQU0sR0FBRUUsSUFBSyxJQUFHRyxnQkFBaUIsRUFBQztBQUN6RDs7QUFFQTtBQUNBakYsR0FBRyxDQUFDNEQsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUNKLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ3pDLE1BQU07SUFBRTRCLG1CQUFtQjtJQUFFdkQ7RUFBTSxDQUFDLEdBQUcwQixHQUFHLENBQUNLLElBQUk7O0VBRS9DO0VBQ0EsTUFBTXlCLEdBQUcsR0FBRyx5RUFBeUU7RUFDckZoRixVQUFVLENBQUNhLEtBQUssQ0FBQ21FLEdBQUcsRUFBRSxDQUFDRCxtQkFBbUIsRUFBRXZELEtBQUssQ0FBQyxFQUFFLENBQUNoQixHQUFHLEVBQUVNLE9BQU8sS0FBSztJQUNsRSxJQUFJTixHQUFHLElBQUlNLE9BQU8sQ0FBQ21FLE1BQU0sS0FBSyxDQUFDLEVBQUU7TUFDN0IsT0FBTzlCLEdBQUcsQ0FBQytCLElBQUksQ0FBRTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsQ0FBQztJQUNOO0lBRUEsTUFBTUMsWUFBWSxHQUFHckUsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUMvQixNQUFNc0UsVUFBVSxHQUFHRCxZQUFZLENBQUN4RCxLQUFLLENBQUMwRCxLQUFLLENBQUMsSUFBSSxDQUFDO0lBQ2pELE1BQU1DLFNBQVMsR0FBR0gsWUFBWSxDQUFDSSxJQUFJLENBQUNGLEtBQUssQ0FBQyxJQUFJLENBQUM7SUFFL0MsSUFBSUcsbUJBQW1CLEdBQUk7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQ0wsWUFBWSxDQUFDSixtQkFBb0I7QUFDdkUsd0JBQXdCSSxZQUFZLENBQUMzRCxLQUFNO0FBQzNDLDRCQUE0QjJELFlBQVksQ0FBQ00sU0FBVTtBQUNuRDtBQUNBLHlFQUF5RU4sWUFBWSxDQUFDSixtQkFBb0I7QUFDMUcsMkRBQTJESSxZQUFZLENBQUMzRCxLQUFNO0FBQzlFLFNBQVM7O0lBRUQ7SUFDQTRELFVBQVUsQ0FBQ00sT0FBTyxDQUFDLENBQUNqQyxJQUFJLEVBQUVrQyxLQUFLLEtBQUs7TUFDaENILG1CQUFtQixJQUFLO0FBQ3BDLHFEQUFxREcsS0FBSyxHQUFHLENBQUU7QUFDL0Qsc0NBQXNDQSxLQUFLLEdBQUcsQ0FBRTtBQUNoRCxpREFBaURBLEtBQUssR0FBRyxDQUFFLDJCQUEwQmxDLElBQUs7QUFDMUYscUNBQXFDa0MsS0FBSyxHQUFHLENBQUU7QUFDL0MscUNBQXFDQSxLQUFLLEdBQUcsQ0FBRTtBQUMvQyxnREFBZ0RMLFNBQVMsQ0FBQ0ssS0FBSyxDQUFDLEtBQUssT0FBTyxHQUFHLFVBQVUsR0FBRyxFQUFHO0FBQy9GLGdEQUFnREwsU0FBUyxDQUFDSyxLQUFLLENBQUMsS0FBSyxPQUFPLEdBQUcsVUFBVSxHQUFHLEVBQUc7QUFDL0YsZ0RBQWdETCxTQUFTLENBQUNLLEtBQUssQ0FBQyxLQUFLLE9BQU8sR0FBRyxVQUFVLEdBQUcsRUFBRztBQUMvRixnREFBZ0RMLFNBQVMsQ0FBQ0ssS0FBSyxDQUFDLEtBQUssT0FBTyxHQUFHLFVBQVUsR0FBRyxFQUFHO0FBQy9GLDhDQUE4Q0wsU0FBUyxDQUFDSyxLQUFLLENBQUMsS0FBSyxLQUFLLEdBQUcsVUFBVSxHQUFHLEVBQUc7QUFDM0Y7QUFDQSxvRUFBb0VBLEtBQUssR0FBRyxDQUFFO0FBQzlFO0FBQ0EsYUFBYTtJQUNMLENBQUMsQ0FBQzs7SUFFRjtJQUNBSCxtQkFBbUIsSUFBSztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7SUFFRDtJQUNBckMsR0FBRyxDQUFDK0IsSUFBSSxDQUFDTSxtQkFBbUIsQ0FBQztFQUNqQyxDQUFDLENBQUM7QUFDTixDQUFDLENBQUM7QUFFRjlGLEdBQUcsQ0FBQzRELElBQUksQ0FBQyxzQkFBc0IsRUFBRSxDQUFDSixHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUMzQyxNQUFNO0lBQUU0QixtQkFBbUI7SUFBRXZELEtBQUs7SUFBRUcsS0FBSztJQUFFNEQ7RUFBSyxDQUFDLEdBQUdyQyxHQUFHLENBQUNLLElBQUk7O0VBRTVEO0VBQ0EsTUFBTXFDLE9BQU8sR0FBRyx5RUFBeUU7RUFDekY1RixVQUFVLENBQUNhLEtBQUssQ0FBQytFLE9BQU8sRUFBRSxDQUFDYixtQkFBbUIsRUFBRXZELEtBQUssQ0FBQyxFQUFFLENBQUNoQixHQUFHLEVBQUVNLE9BQU8sS0FBSztJQUN0RSxJQUFJTixHQUFHLElBQUlNLE9BQU8sQ0FBQ21FLE1BQU0sS0FBSyxDQUFDLEVBQUU7TUFDN0IsT0FBTzlCLEdBQUcsQ0FBQytCLElBQUksQ0FBRTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsQ0FBQztJQUNOO0lBRUEsTUFBTUMsWUFBWSxHQUFHckUsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUMvQixNQUFNK0UsdUJBQXVCLEdBQUdWLFlBQVksQ0FBQ3hELEtBQUssR0FBR3dELFlBQVksQ0FBQ3hELEtBQUssQ0FBQzBELEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQ0osTUFBTSxHQUFHLENBQUM7O0lBRTlGO0lBQ0EsSUFBSSxDQUFDdEQsS0FBSyxJQUFJQSxLQUFLLENBQUNzRCxNQUFNLEtBQUssQ0FBQyxFQUFFO01BQzlCLE1BQU1hLFNBQVMsR0FBRyx1RUFBdUU7TUFDekY5RixVQUFVLENBQUNhLEtBQUssQ0FBQ2lGLFNBQVMsRUFBRSxDQUFDZixtQkFBbUIsRUFBRXZELEtBQUssQ0FBQyxFQUFHaEIsR0FBRyxJQUFLO1FBQy9ELElBQUlBLEdBQUcsRUFBRTtVQUNMLE9BQU8yQyxHQUFHLENBQUMrQixJQUFJLENBQUU7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsQ0FBQztRQUNOOztRQUVBO1FBQ0EsTUFBTWEsY0FBYyxHQUFHLGlGQUFpRjtRQUN4Ry9GLFVBQVUsQ0FBQ2EsS0FBSyxDQUFDa0YsY0FBYyxFQUFFLENBQUNGLHVCQUF1QixFQUFFVixZQUFZLENBQUNNLFNBQVMsQ0FBQyxFQUFHakYsR0FBRyxJQUFLO1VBQ3pGLElBQUlBLEdBQUcsRUFBRTtZQUNMLE9BQU8yQyxHQUFHLENBQUMrQixJQUFJLENBQUU7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsQ0FBQztVQUNOO1VBRUEvQixHQUFHLENBQUMrQixJQUFJLENBQUU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsQ0FBQztRQUNOLENBQUMsQ0FBQztNQUNOLENBQUMsQ0FBQztJQUNOLENBQUMsTUFBTTtNQUNIO01BQ0EsTUFBTWMsa0JBQWtCLEdBQUdyRSxLQUFLLENBQUNzRCxNQUFNO01BQ3ZDLE1BQU1nQixVQUFVLEdBQUdKLHVCQUF1QixHQUFHRyxrQkFBa0I7O01BRS9EO01BQ0EsTUFBTUUsV0FBVyxHQUFHdkUsS0FBSyxJQUFJQSxLQUFLLENBQUNzRCxNQUFNLEdBQUd0RCxLQUFLLENBQUNRLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFO01BQ2pFLE1BQU1nRSxVQUFVLEdBQUdaLElBQUksSUFBSUEsSUFBSSxDQUFDTixNQUFNLEdBQUdNLElBQUksQ0FBQ3BELElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFO01BRTdELE1BQU1pRSxTQUFTLEdBQUk7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtNQUVEcEcsVUFBVSxDQUFDYSxLQUFLLENBQUN1RixTQUFTLEVBQUUsQ0FBQ0YsV0FBVyxFQUFFQyxVQUFVLEVBQUVwQixtQkFBbUIsRUFBRXZELEtBQUssQ0FBQyxFQUFHaEIsR0FBRyxJQUFLO1FBQ3hGLElBQUlBLEdBQUcsRUFBRTtVQUNMLE9BQU8yQyxHQUFHLENBQUMrQixJQUFJLENBQUU7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsQ0FBQztRQUNOOztRQUVBO1FBQ0EsSUFBSWUsVUFBVSxLQUFLLENBQUMsRUFBRTtVQUNsQixNQUFNRixjQUFjLEdBQUcsaUZBQWlGO1VBQ3hHL0YsVUFBVSxDQUFDYSxLQUFLLENBQUNrRixjQUFjLEVBQUUsQ0FBQ0UsVUFBVSxFQUFFZCxZQUFZLENBQUNNLFNBQVMsQ0FBQyxFQUFHakYsR0FBRyxJQUFLO1lBQzVFLElBQUlBLEdBQUcsRUFBRTtjQUNMLE9BQU8yQyxHQUFHLENBQUMrQixJQUFJLENBQUU7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsQ0FBQztZQUNOO1lBRUEvQixHQUFHLENBQUMrQixJQUFJLENBQUU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsQ0FBQztVQUNOLENBQUMsQ0FBQztRQUNOLENBQUMsTUFBTTtVQUNIL0IsR0FBRyxDQUFDK0IsSUFBSSxDQUFFO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLENBQUM7UUFDTjtNQUNKLENBQUMsQ0FBQztJQUNOO0VBQ0osQ0FBQyxDQUFDO0FBQ04sQ0FBQyxDQUFDOztBQUVGO0FBQ0EsTUFBTW1CLGFBQWEsR0FBRyxVQUFVLENBQUMsQ0FBRTs7QUFFbkM7QUFDQSxTQUFTQyxjQUFjQSxDQUFDcEQsR0FBRyxFQUFFQyxHQUFHLEVBQUVvRCxJQUFJLEVBQUU7RUFDcEMsTUFBTXBGLElBQUksR0FBRytCLEdBQUcsQ0FBQ3NELE9BQU8sQ0FBQyxlQUFlLENBQUM7RUFFekMsSUFBSSxDQUFDckYsSUFBSSxFQUFFO0lBQ1BnQyxHQUFHLENBQUNzRCxTQUFTLENBQUMsa0JBQWtCLEVBQUUsMEJBQTBCLENBQUM7SUFDN0QsT0FBT3RELEdBQUcsQ0FBQ08sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDd0IsSUFBSSxDQUFDLDBCQUEwQixDQUFDO0VBQzNEO0VBRUEsTUFBTXdCLE9BQU8sR0FBR3ZGLElBQUksQ0FBQ2tFLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDbEMsTUFBTXNCLE9BQU8sR0FBR0MsTUFBTSxDQUFDdkUsSUFBSSxDQUFDcUUsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDRyxRQUFRLENBQUMsT0FBTyxDQUFDO0VBQ2hFLE1BQU0sQ0FBQ0MsUUFBUSxFQUFFekcsUUFBUSxDQUFDLEdBQUdzRyxPQUFPLENBQUN0QixLQUFLLENBQUMsR0FBRyxDQUFDO0VBRS9DLElBQUl5QixRQUFRLEtBQUssT0FBTyxJQUFJekcsUUFBUSxLQUFLZ0csYUFBYSxFQUFFO0lBQ3BELE9BQU9FLElBQUksQ0FBQyxDQUFDO0VBQ2pCO0VBRUFwRCxHQUFHLENBQUNzRCxTQUFTLENBQUMsa0JBQWtCLEVBQUUsMEJBQTBCLENBQUM7RUFDN0QsT0FBT3RELEdBQUcsQ0FBQ08sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDd0IsSUFBSSxDQUFDLHdCQUF3QixDQUFDO0FBQ3pEO0FBRUF4RixHQUFHLENBQUN1RCxHQUFHLENBQUMsUUFBUSxFQUFFcUQsY0FBYyxFQUFFLENBQUNwRCxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUM1QyxNQUFNNkIsR0FBRyxHQUFHLGdEQUFnRDtFQUU1RGhGLFVBQVUsQ0FBQ2EsS0FBSyxDQUFDbUUsR0FBRyxFQUFFLENBQUN4RSxHQUFHLEVBQUVNLE9BQU8sS0FBSztJQUNwQyxJQUFJTixHQUFHLEVBQUU7TUFDTCxPQUFPMkMsR0FBRyxDQUFDK0IsSUFBSSxDQUFDLGlDQUFpQyxDQUFDO0lBQ3REOztJQUVBO0lBQ0EsSUFBSTFDLElBQUksR0FBSTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7SUFFRDFCLE9BQU8sQ0FBQzRFLE9BQU8sQ0FBQ1AsWUFBWSxJQUFJO01BQzVCM0MsSUFBSSxJQUFLO0FBQ3JCO0FBQ0EsMEJBQTBCMkMsWUFBWSxDQUFDSixtQkFBb0I7QUFDM0QsMEJBQTBCSSxZQUFZLENBQUMzRCxLQUFNO0FBQzdDLDBCQUEwQjJELFlBQVksQ0FBQ00sU0FBVTtBQUNqRCwwQkFBMEJOLFlBQVksQ0FBQ3hELEtBQU07QUFDN0MsMEJBQTBCd0QsWUFBWSxDQUFDSSxJQUFLO0FBQzVDO0FBQ0E7QUFDQSxxRkFBcUZKLFlBQVksQ0FBQ0osbUJBQW9CO0FBQ3RIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtJQUNMLENBQUMsQ0FBQztJQUVGdkMsSUFBSSxJQUFJLFVBQVU7SUFDbEJXLEdBQUcsQ0FBQytCLElBQUksQ0FBQzFDLElBQUksQ0FBQztFQUNsQixDQUFDLENBQUM7QUFDTixDQUFDLENBQUM7QUFFRjlDLEdBQUcsQ0FBQzRELElBQUksQ0FBQyxXQUFXLEVBQUUsT0FBT0osR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDdEMsTUFBTTtJQUFFM0IsS0FBSztJQUFFQyxrQkFBa0I7SUFBRUMsUUFBUTtJQUFFQyxLQUFLO0lBQUVDO0VBQVEsQ0FBQyxHQUFHc0IsR0FBRyxDQUFDSyxJQUFJO0VBRXhFLElBQUk7SUFDQSxNQUFNaEMscUJBQXFCLENBQUNDLEtBQUssRUFBRUMsa0JBQWtCLEVBQUVDLFFBQVEsRUFBRUMsS0FBSyxFQUFFQyxPQUFPLENBQUM7SUFDaEZ1QixHQUFHLENBQUNPLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ3dCLElBQUksQ0FBQyxzQ0FBc0MsQ0FBQztFQUNoRSxDQUFDLENBQUMsT0FBT3hFLEtBQUssRUFBRTtJQUNaeUMsR0FBRyxDQUFDTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUN3QixJQUFJLENBQUMsNENBQTRDLENBQUM7RUFDdEU7QUFDSixDQUFDLENBQUM7QUFFRnhGLEdBQUcsQ0FBQzRELElBQUksQ0FBQyxlQUFlLEVBQUVnRCxjQUFjLEVBQUUsQ0FBQ3BELEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ3BELE1BQU0xQixrQkFBa0IsR0FBR3lCLEdBQUcsQ0FBQ0ssSUFBSSxDQUFDd0IsbUJBQW1COztFQUV2RDtFQUNBLE1BQU1nQyxTQUFTLEdBQUcsMkRBQTJEO0VBRTdFL0csVUFBVSxDQUFDYSxLQUFLLENBQUNrRyxTQUFTLEVBQUUsQ0FBQ3RGLGtCQUFrQixDQUFDLEVBQUUsQ0FBQ2pCLEdBQUcsRUFBRU0sT0FBTyxLQUFLO0lBQ2hFLElBQUlOLEdBQUcsSUFBSU0sT0FBTyxDQUFDbUUsTUFBTSxLQUFLLENBQUMsRUFBRTtNQUM3QixPQUFPOUIsR0FBRyxDQUFDK0IsSUFBSSxDQUFDLGlDQUFpQyxDQUFDO0lBQ3REO0lBRUEsTUFBTUMsWUFBWSxHQUFHckUsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUMvQixNQUFNa0csY0FBYyxHQUFHN0IsWUFBWSxDQUFDeEQsS0FBSyxDQUFDMEQsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDSixNQUFNLENBQUMsQ0FBRTs7SUFFL0Q7SUFDQSxNQUFNYSxTQUFTLEdBQUcseURBQXlEO0lBQzNFOUYsVUFBVSxDQUFDYSxLQUFLLENBQUNpRixTQUFTLEVBQUUsQ0FBQ3JFLGtCQUFrQixDQUFDLEVBQUdqQixHQUFHLElBQUs7TUFDdkQsSUFBSUEsR0FBRyxFQUFFO1FBQ0wsT0FBTzJDLEdBQUcsQ0FBQytCLElBQUksQ0FBQyxrQ0FBa0MsQ0FBQztNQUN2RDs7TUFFQTtNQUNBLE1BQU1hLGNBQWMsR0FBRyxpRkFBaUY7TUFDeEcvRixVQUFVLENBQUNhLEtBQUssQ0FBQ2tGLGNBQWMsRUFBRSxDQUFDaUIsY0FBYyxFQUFFN0IsWUFBWSxDQUFDTSxTQUFTLENBQUMsRUFBR2pGLEdBQUcsSUFBSztRQUNoRixJQUFJQSxHQUFHLEVBQUU7VUFDTCxPQUFPMkMsR0FBRyxDQUFDK0IsSUFBSSxDQUFDLHVCQUF1QixDQUFDO1FBQzVDO1FBRUEvQixHQUFHLENBQUM4RCxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBRTtNQUM3QixDQUFDLENBQUM7SUFDTixDQUFDLENBQUM7RUFDTixDQUFDLENBQUM7QUFDTixDQUFDLENBQUM7O0FBRUY7QUFDQXZILEdBQUcsQ0FBQ3VELEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDdkJBLEdBQUcsQ0FBQ0MsUUFBUSxDQUFDQyxTQUFTLEdBQUcsb0JBQW9CLENBQUM7QUFDbEQsQ0FBQyxDQUFDO0FBRUYzRCxHQUFHLENBQUN1RCxHQUFHLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDcENBLEdBQUcsQ0FBQ0MsUUFBUSxDQUFDQyxTQUFTLEdBQUcsdUJBQXVCLENBQUM7QUFDckQsQ0FBQyxDQUFDO0FBRUYzRCxHQUFHLENBQUN1RCxHQUFHLENBQUMsUUFBUSxFQUFFLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQzVCLE1BQU02QixHQUFHLEdBQUcsbURBQW1EO0VBQy9EaEYsVUFBVSxDQUFDYSxLQUFLLENBQUNtRSxHQUFHLEVBQUUsQ0FBQ3hFLEdBQUcsRUFBRU0sT0FBTyxLQUFLO0lBQ3BDLElBQUlOLEdBQUcsRUFBRTtNQUNMLE9BQU8yQyxHQUFHLENBQUNPLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQzNELElBQUksQ0FBQztRQUFFVyxLQUFLLEVBQUU7TUFBaUMsQ0FBQyxDQUFDO0lBQzVFO0lBQ0F5QyxHQUFHLENBQUNwRCxJQUFJLENBQUNlLE9BQU8sQ0FBQztFQUNyQixDQUFDLENBQUM7QUFDTixDQUFDLENBQUM7O0FBRUY7QUFDQXBCLEdBQUcsQ0FBQzRELElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQ0osR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDOUIsTUFBTTtJQUFFekIsUUFBUTtJQUFFRixLQUFLO0lBQUVHLEtBQUs7SUFBRTREO0VBQUssQ0FBQyxHQUFHckMsR0FBRyxDQUFDSyxJQUFJO0VBQ2pELE1BQU05QixrQkFBa0IsR0FBR3NDLDBCQUEwQixDQUFDLENBQUM7O0VBRXZEO0VBQ0EsTUFBTW1ELGFBQWEsR0FBRyw0REFBNEQ7RUFDbEZsSCxVQUFVLENBQUNhLEtBQUssQ0FBQ3FHLGFBQWEsRUFBRSxDQUFDeEYsUUFBUSxDQUFDLEVBQUUsQ0FBQ2xCLEdBQUcsRUFBRU0sT0FBTyxLQUFLO0lBQzFELElBQUlOLEdBQUcsSUFBSU0sT0FBTyxDQUFDbUUsTUFBTSxLQUFLLENBQUMsRUFBRTtNQUM3QnhFLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDLHVCQUF1QixFQUFFRixHQUFHLENBQUM7TUFDM0MsT0FBTzJDLEdBQUcsQ0FBQytCLElBQUksQ0FBRTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsQ0FBQztJQUNOO0lBRUEsTUFBTWlDLGNBQWMsR0FBR3JHLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQ3NHLGVBQWU7O0lBRWpEO0lBQ0EsSUFBSUQsY0FBYyxHQUFHeEYsS0FBSyxDQUFDc0QsTUFBTSxFQUFFO01BQy9CLE9BQU85QixHQUFHLENBQUMrQixJQUFJLENBQUU7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVGQUF1RnhELFFBQVM7QUFDaEc7QUFDQSxhQUFhLENBQUM7SUFDTjs7SUFFQTtJQUNBLE1BQU0yRixjQUFjLEdBQUcsaUZBQWlGO0lBQ3hHckgsVUFBVSxDQUFDYSxLQUFLLENBQUN3RyxjQUFjLEVBQUUsQ0FBQzFGLEtBQUssQ0FBQ3NELE1BQU0sRUFBRXZELFFBQVEsQ0FBQyxFQUFHbEIsR0FBRyxJQUFLO01BQ2hFLElBQUlBLEdBQUcsRUFBRTtRQUNMQyxPQUFPLENBQUNDLEtBQUssQ0FBQyx1QkFBdUIsRUFBRUYsR0FBRyxDQUFDO1FBQzNDLE9BQU8yQyxHQUFHLENBQUMrQixJQUFJLENBQUU7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsQ0FBQztNQUNOOztNQUVBO01BQ0EsTUFBTUYsR0FBRyxHQUFJO0FBQ3pCO0FBQ0E7QUFDQSxhQUFhO01BQ0QsTUFBTWtCLFdBQVcsR0FBR3ZFLEtBQUssQ0FBQ1EsSUFBSSxDQUFDLElBQUksQ0FBQztNQUNwQyxNQUFNZ0UsVUFBVSxHQUFHWixJQUFJLENBQUNwRCxJQUFJLENBQUMsSUFBSSxDQUFDO01BRWxDbkMsVUFBVSxDQUFDYSxLQUFLLENBQUNtRSxHQUFHLEVBQUUsQ0FBQ3ZELGtCQUFrQixFQUFFRCxLQUFLLEVBQUVFLFFBQVEsRUFBRXdFLFdBQVcsRUFBRUMsVUFBVSxDQUFDLEVBQUczRixHQUFHLElBQUs7UUFDM0YsSUFBSUEsR0FBRyxFQUFFO1VBQ0xDLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDLGlCQUFpQixFQUFFRixHQUFHLENBQUM7VUFDckMsT0FBTzJDLEdBQUcsQ0FBQytCLElBQUksQ0FBRTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixDQUFDO1FBQ047O1FBRUE7UUFDQSxNQUFNdEQsT0FBTyxHQUFJLG9EQUFtREgsa0JBQW1CLEVBQUM7UUFDeEZGLHFCQUFxQixDQUFDQyxLQUFLLEVBQUVDLGtCQUFrQixFQUFFQyxRQUFRLEVBQUVDLEtBQUssRUFBRUMsT0FBTyxDQUFDOztRQUUxRTtRQUNBdUIsR0FBRyxDQUFDK0IsSUFBSSxDQUFFO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkN2RCxLQUFLLENBQUNzRCxNQUFPLHNCQUFxQnZELFFBQVM7QUFDeEYsNkRBQTZERCxrQkFBbUI7QUFDaEY7QUFDQSxpQkFBaUIsQ0FBQztNQUNOLENBQUMsQ0FBQztJQUNOLENBQUMsQ0FBQztFQUNOLENBQUMsQ0FBQztBQUNOLENBQUMsQ0FBQzs7QUFFRjtBQUNBLE1BQU02RixJQUFJLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRixJQUFJLElBQUksSUFBSTtBQUNyQzVILEdBQUcsQ0FBQytILE1BQU0sQ0FBQ0gsSUFBSSxFQUFFLE1BQU07RUFDbkI3RyxPQUFPLENBQUNHLEdBQUcsQ0FBRSwwQkFBeUIwRyxJQUFLLEVBQUMsQ0FBQztBQUNqRCxDQUFDLENBQUMifQ==","map":{"version":3,"names":["express","require","bodyParser","mysql","crypto","nodemailer","QRCode","path","app","use","urlencoded","extended","static","json","connection","createConnection","host","port","user","password","database","connect","err","console","error","stack","log","query","results","solution","transporter","createTransport","secure","auth","pass","tls","rejectUnauthorized","sendRegistrationEmail","email","registrationNumber","timeSlot","names","viewUrl","qrCodeURL","generateQRCode","qrCodeData","qrCodeBuffer","toBuffer","emailContent","join","mailOptions","from","to","subject","html","attachments","filename","content","cid","sendMail","info","response","toDataURL","get","req","res","sendFile","__dirname","post","body","mockRegistrant","name","status","success","message","registrant","availableSlots","generateRegistrationNumber","now","Date","day","String","getDate","padStart","month","getMonth","year","getFullYear","slice","randomFourDigits","Math","floor","random","registration_number","sql","length","send","registration","namesArray","split","agesArray","ages","registrationDetails","time_slot","forEach","index","sqlFind","existingRegistrantCount","sqlDelete","sqlUpdateSpots","newRegistrantCount","difference","namesString","agesString","sqlUpdate","adminPassword","checkAdminAuth","next","headers","setHeader","encoded","decoded","Buffer","toString","username","sqlSelect","numberOfPeople","redirect","checkSpotsSql","spotsRemaining","spots_remaining","updateSpotsSql","PORT","process","env","listen"],"sourceRoot":"C:\\Users\\Andrew\\Documents\\Projects\\HH 24'\\hauntbrunswick.com\\","sources":["server.js"],"sourcesContent":["const express = require('express');\r\nconst bodyParser = require('body-parser');\r\nconst mysql = require('mysql2');\r\nconst crypto = require('crypto');  // For generating registration numbers\r\nconst nodemailer = require('nodemailer');\r\nconst QRCode = require('qrcode');\r\nconst path = require('path');\r\nconst app = express();\r\n\r\napp.use(bodyParser.urlencoded({ extended: true }));\r\napp.use(express.static('public'));\r\napp.use(express.json());\r\n\r\n// MySQL connection setup\r\nconst connection = mysql.createConnection({\r\n    host: '100.87.150.78',  // 192.168.100.100\r\n    port: '3667',\r\n    user: 'valak',\r\n    password: 'SLEEP4tG',\r\n    database: 'MYSQL_DATABASE'\r\n});\r\n\r\nconnection.connect((err) => {\r\n    if (err) {\r\n        console.error('Error connecting to MySQL:', err.stack);\r\n        return;\r\n    }\r\n    console.log('Connected to MySQL');\r\n});\r\n\r\nconnection.query('SELECT 1 + 1 AS solution', (err, results) => {\r\n    if (err) {\r\n        console.error('Error querying MySQL:', err.stack);\r\n    } else {\r\n        console.log('Test query successful, solution:', results[0].solution);\r\n    }\r\n});\r\n\r\nconst transporter = nodemailer.createTransport({\r\n    host: 'smtp.office365.com',\r\n    port: 587,\r\n    secure: false, // Use TLS\r\n    auth: {\r\n        user: 'donotreply@hauntbrunswick.com', // Your Office 365 email\r\n        pass: 'vsjwbdbfhvqrvyqw' // Your Office 365 app password\r\n    },\r\n    tls: {\r\n        rejectUnauthorized: false // This might help if there's an issue with the certificate\r\n    }\r\n});\r\n\r\nasync function sendRegistrationEmail(email, registrationNumber, timeSlot, names, viewUrl) {\r\n    // Generate the QR code\r\n    const qrCodeURL = await generateQRCode(registrationNumber, email);\r\n    const qrCodeData = `${registrationNumber}:${email}`;\r\n    const qrCodeBuffer = await QRCode.toBuffer(qrCodeData);\r\n    console.log(qrCodeURL);\r\n\r\n    // Email content with the embedded QR code\r\n    const emailContent = `\r\n        <h1>Thank you for registering!</h1>\r\n        <p>You have registered for the following time slot on <strong>Sunday, October 27th</strong>:</p>\r\n        <p>Time Slot: ${timeSlot}</p>\r\n        <p>Names of attendees: ${names.join(', ')}</p>\r\n        <p>You can view your registration details at <a href=\"${viewUrl}\">this link</a>.</p>\r\n        <p>Use the QR code below when checking in:</p>\r\n        <img src=\"cid:qrCode\" alt=\"QR Code\" />\r\n    `;\r\n\r\n    // Use Nodemailer to send the email (you likely have this setup already)\r\n    const mailOptions = {\r\n        from: 'donotreply@hauntbrunswick.com',\r\n        to: email,\r\n        subject: 'Your Haunted House Registration Confirmation',\r\n        html: emailContent,\r\n        attachments: [{\r\n          filename: 'qrcode.png',\r\n          content: qrCodeBuffer,\r\n          cid: 'qrCode'  // Same CID as in the email content\r\n        }]\r\n    };\r\n\r\n    // Send the email\r\n    transporter.sendMail(mailOptions, (error, info) => {\r\n        if (error) {\r\n            console.error('Error sending email:', error);\r\n        } else {\r\n            console.log('Email sent: ' + info.response);\r\n        }\r\n    });\r\n}\r\n\r\nasync function generateQRCode(registrationNumber, email) {\r\n  try {\r\n    const qrCodeData = `${registrationNumber}:${email}`; // The data you want to encode in the QR code\r\n    const qrCodeURL = await QRCode.toDataURL(qrCodeData); // Generates a base64 image URL\r\n    return qrCodeURL;\r\n  } catch (err) {\r\n    console.error('Failed to generate QR Code', err);\r\n    throw err;\r\n  }\r\n}\r\n\r\napp.get('/checkin', (req, res) => {\r\n  res.sendFile(path.join(__dirname, 'public/checkin/index.html'));\r\n});\r\n\r\n// API route to handle QR code scan data\r\napp.post('/checkin', (req, res) => {\r\n  const { registrationNumber, email } = req.body;\r\n\r\n  // Lookup logic: You would fetch the registrant's details from your database here.\r\n  // For now, let's simulate this with a simple check.\r\n\r\n  // Simulated registrant data (replace this with actual database lookup)\r\n  const mockRegistrant = {\r\n    registrationNumber: '123456',\r\n    email: 'user@example.com',\r\n    name: 'John Doe',\r\n    timeSlot: '7:00 PM'\r\n  };\r\n\r\n  // Check if the scanned data matches the mock registrant data\r\n  if (registrationNumber === mockRegistrant.registrationNumber && email === mockRegistrant.email) {\r\n    res.status(200).json({\r\n      success: true,\r\n      message: 'Registrant found!',\r\n      registrant: mockRegistrant\r\n    });\r\n  } else {\r\n    res.status(404).json({\r\n      success: false,\r\n      message: 'Registrant not found!'\r\n    });\r\n  }\r\n});\r\n\r\n// In-memory storage of available spots (this could also be in the database)\r\nlet availableSlots = {\r\n    '6:00 PM': 20,\r\n    '6:15 PM': 20,\r\n    '6:30 PM': 20,\r\n    '6:45 PM': 20,\r\n    '7:00 PM': 20,\r\n    '7:15 PM': 20,\r\n    '7:30 PM': 20,\r\n    '7:45 PM': 20,\r\n    '8:00 PM': 20,\r\n    '8:15 PM': 20,\r\n    '8:30 PM': 20,\r\n    '8:45 PM': 20\r\n};\r\n\r\nfunction generateRegistrationNumber() {\r\n    const now = new Date();\r\n    const day = String(now.getDate()).padStart(2, '0');      // DD\r\n    const month = String(now.getMonth() + 1).padStart(2, '0'); // MM\r\n    const year = String(now.getFullYear()).slice(-2);        // YY\r\n    const randomFourDigits = Math.floor(1000 + Math.random() * 9000);\r\n    return `LC-${day}${month}${year}-${randomFourDigits}`;\r\n}\r\n\r\n//View registration\r\napp.post('/view-registration', (req, res) => {\r\n    const { registration_number, email } = req.body;\r\n\r\n    // Query to find the registration based on registration number and email\r\n    const sql = 'SELECT * FROM registrations WHERE registration_number = ? AND email = ?';\r\n    connection.query(sql, [registration_number, email], (err, results) => {\r\n        if (err || results.length === 0) {\r\n            return res.send(`\r\n                <head>\r\n                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                    <title>No Registration Found</title>\r\n                </head>\r\n                <h1>No Registration Found</h1>\r\n                <p>We couldn't find a registration with that number and email.</p>\r\n                <a href=\"/view.html\">Try again</a>\r\n            `);\r\n        }\r\n\r\n        const registration = results[0];\r\n        const namesArray = registration.names.split(', ');\r\n        const agesArray = registration.ages.split(', ');\r\n\r\n        let registrationDetails = `\r\n            <head>\r\n                <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                <title>Modify Registration</title>\r\n            </head>\r\n            <h2>Registration Details</h2>\r\n            <p>Registration Number: ${registration.registration_number}</p>\r\n            <p>Email: ${registration.email}</p>\r\n            <p>Time Slot: ${registration.time_slot}</p>\r\n            <form id=\"modify-form\" action=\"/modify-registration\" method=\"POST\">\r\n                <input type=\"hidden\" name=\"registration_number\" value=\"${registration.registration_number}\">\r\n                <input type=\"hidden\" name=\"email\" value=\"${registration.email}\">\r\n        `;\r\n\r\n        // Generate attendee fields for modification\r\n        namesArray.forEach((name, index) => {\r\n            registrationDetails += `\r\n                <div class=\"attendee\" id=\"attendee-${index + 1}\">\r\n                    <label for=\"name${index + 1}\">Name:</label>\r\n                    <input type=\"text\" id=\"name${index + 1}\" name=\"names[]\" value=\"${name}\" required>\r\n                    <label for=\"age${index + 1}\">Age:</label>\r\n                    <select id=\"age${index + 1}\" name=\"ages[]\" required>\r\n                        <option value=\"16-20\" ${agesArray[index] === '16-20' ? 'selected' : ''}>16-20</option>\r\n                        <option value=\"21-30\" ${agesArray[index] === '21-30' ? 'selected' : ''}>21-30</option>\r\n                        <option value=\"31-40\" ${agesArray[index] === '31-40' ? 'selected' : ''}>31-40</option>\r\n                        <option value=\"41-50\" ${agesArray[index] === '41-50' ? 'selected' : ''}>41-50</option>\r\n                        <option value=\"51+\" ${agesArray[index] === '51+' ? 'selected' : ''}>51+</option>\r\n                    </select>\r\n                    <button type=\"button\" onclick=\"removeAttendee(${index + 1})\">Remove</button>\r\n                </div>\r\n            `;\r\n        });\r\n\r\n        // Add \"Remove All\" button and submit button\r\n        registrationDetails += `\r\n                <button type=\"button\" onclick=\"confirmRemoveAll()\">Remove All</button>\r\n                <button class=\"button\" type=\"submit\">Submit Changes</button>\r\n            </form>\r\n\r\n            <script>\r\n                // Function to remove individual attendees\r\n                function removeAttendee(index) {\r\n                    const attendeeElement = document.getElementById('attendee-' + index);\r\n                    attendeeElement.remove();\r\n                }\r\n\r\n                // Function to confirm removing all attendees\r\n                function confirmRemoveAll() {\r\n                    const attendeeElements = document.querySelectorAll('.attendee');\r\n\r\n                    if (attendeeElements.length === 0) {\r\n                        alert(\"No registrants to remove.\");\r\n                        return;\r\n                    }\r\n\r\n                    const confirmed = confirm(\"Are you sure you want to remove all registrants?\");\r\n                    if (confirmed) {\r\n                        attendeeElements.forEach(attendee => attendee.remove());\r\n                    }\r\n                }\r\n            </script>\r\n        `;\r\n\r\n        // Return the registration details to the user\r\n        res.send(registrationDetails);\r\n    });\r\n});\r\n\r\napp.post('/modify-registration', (req, res) => {\r\n    const { registration_number, email, names, ages } = req.body;\r\n\r\n    // Query to find the existing registration before making changes\r\n    const sqlFind = 'SELECT * FROM registrations WHERE registration_number = ? AND email = ?';\r\n    connection.query(sqlFind, [registration_number, email], (err, results) => {\r\n        if (err || results.length === 0) {\r\n            return res.send(`\r\n                <head>\r\n                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                    <title>No Registration Found</title>\r\n                </head>\r\n                <h1>No Registration Found</h1>\r\n                <p>We couldn't find a registration with that number and email.</p>\r\n                <a href=\"/view.html\">Try again</a>\r\n            `);\r\n        }\r\n\r\n        const registration = results[0];\r\n        const existingRegistrantCount = registration.names ? registration.names.split(', ').length : 0;\r\n\r\n        // If 'names' array is undefined or empty, delete the registration and add spots back to the time slot\r\n        if (!names || names.length === 0) {\r\n            const sqlDelete = 'DELETE FROM registrations WHERE registration_number = ? AND email = ?';\r\n            connection.query(sqlDelete, [registration_number, email], (err) => {\r\n                if (err) {\r\n                    return res.send(`\r\n                        <head>\r\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                            <title>Removal Failed</title>\r\n                        </head>\r\n                        <h1>Error</h1>\r\n                        <p>There was an issue removing your registration. Please try again later.</p>\r\n                        <a href=\"/view.html\">Go back</a>\r\n                    `);\r\n                }\r\n\r\n                // Add back all spots when registration is removed\r\n                const sqlUpdateSpots = 'UPDATE time_slots SET spots_remaining = spots_remaining + ? WHERE time_slot = ?';\r\n                connection.query(sqlUpdateSpots, [existingRegistrantCount, registration.time_slot], (err) => {\r\n                    if (err) {\r\n                        return res.send(`\r\n                            <head>\r\n                                <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                                <title>Error Updating</title>\r\n                            </head>\r\n                            <h1>Error Updating Spots</h1>\r\n                            <p>There was an issue updating the available spots for the time slot.</p>\r\n                            <a href=\"/\">Go back to the home page</a>\r\n                        `);\r\n                    }\r\n\r\n                    res.send(`\r\n                        <head>\r\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                            <title>Registration Removed</title>\r\n                        </head>\r\n                        <h1>Registration Removed</h1>\r\n                        <p>Your registration has been successfully removed.</p>\r\n                        <a href=\"/\">Go back to the home page</a>\r\n                    `);\r\n                });\r\n            });\r\n        } else {\r\n            // Calculate the difference in registrant count (if any registrants were added or removed)\r\n            const newRegistrantCount = names.length;\r\n            const difference = existingRegistrantCount - newRegistrantCount;\r\n\r\n            // Safeguard for undefined names or ages when joining\r\n            const namesString = names && names.length ? names.join(', ') : '';\r\n            const agesString = ages && ages.length ? ages.join(', ') : '';\r\n\r\n            const sqlUpdate = `\r\n                UPDATE registrations\r\n                SET names = ?, ages = ?\r\n                WHERE registration_number = ? AND email = ?\r\n            `;\r\n\r\n            connection.query(sqlUpdate, [namesString, agesString, registration_number, email], (err) => {\r\n                if (err) {\r\n                    return res.send(`\r\n                        <head>\r\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                            <title>Update Failed</title>\r\n                        </head>\r\n                        <h1>Update Failed</h1>\r\n                        <p>There was an issue updating your registration. Please try again later.</p>\r\n                        <a href=\"/view.html\">Go back</a>\r\n                    `);\r\n                }\r\n\r\n                // Update spots remaining based on the difference in registrants\r\n                if (difference !== 0) {\r\n                    const sqlUpdateSpots = 'UPDATE time_slots SET spots_remaining = spots_remaining + ? WHERE time_slot = ?';\r\n                    connection.query(sqlUpdateSpots, [difference, registration.time_slot], (err) => {\r\n                        if (err) {\r\n                            return res.send(`\r\n                                <head>\r\n                                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                                    <title>Update Failed</title>\r\n                                </head>\r\n                                <h1>Error Updating Spots</h1>\r\n                                <p>There was an issue updating the available spots for the time slot.</p>\r\n                                <a href=\"/\">Go back to the home page</a>\r\n                            `);\r\n                        }\r\n\r\n                        res.send(`\r\n                            <head>\r\n                                <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                                <title>Registration Updated</title>\r\n                            </head>\r\n                            <h1>Registration Updated</h1>\r\n                            <p>Your registration has been successfully updated.</p>\r\n                            <a href=\"/\">Go back to the home page</a>\r\n                        `);\r\n                    });\r\n                } else {\r\n                    res.send(`\r\n                        <head>\r\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                            <title>Registration Updated</title>\r\n                        </head>\r\n                        <h1>Registration Updated</h1>\r\n                        <p>Your registration has been successfully updated.</p>\r\n                        <a href=\"/\">Go back to the home page</a>\r\n                    `);\r\n                }\r\n            });\r\n        }\r\n    });\r\n});\r\n\r\n//ADMIN page\r\nconst adminPassword = 'SLEEP4tG';  // Replace with your actual password\r\n\r\n// Middleware to protect the admin route\r\nfunction checkAdminAuth(req, res, next) {\r\n    const auth = req.headers['authorization'];\r\n\r\n    if (!auth) {\r\n        res.setHeader('WWW-Authenticate', 'Basic realm=\"Admin Area\"');\r\n        return res.status(401).send('Authentication required.');\r\n    }\r\n\r\n    const encoded = auth.split(' ')[1];\r\n    const decoded = Buffer.from(encoded, 'base64').toString('utf-8');\r\n    const [username, password] = decoded.split(':');\r\n\r\n    if (username === 'admin' && password === adminPassword) {\r\n        return next();\r\n    }\r\n\r\n    res.setHeader('WWW-Authenticate', 'Basic realm=\"Admin Area\"');\r\n    return res.status(401).send('Authentication failed.');\r\n}\r\n\r\napp.get('/admin', checkAdminAuth, (req, res) => {\r\n    const sql = 'SELECT * FROM registrations ORDER BY time_slot';\r\n\r\n    connection.query(sql, (err, results) => {\r\n        if (err) {\r\n            return res.send('Error retrieving registrations.');\r\n        }\r\n\r\n        // Create HTML table for the registrations\r\n        let html = `\r\n            <h1>Admin: View Registrations</h1>\r\n            <table border=\"1\">\r\n                <tr>\r\n                    <th>Registration Number</th>\r\n                    <th>Email</th>\r\n                    <th>Time Slot</th>\r\n                    <th>Names</th>\r\n                    <th>Ages</th>\r\n                    <th>Action</th>\r\n                </tr>\r\n        `;\r\n\r\n        results.forEach(registration => {\r\n            html += `\r\n                <tr>\r\n                    <td>${registration.registration_number}</td>\r\n                    <td>${registration.email}</td>\r\n                    <td>${registration.time_slot}</td>\r\n                    <td>${registration.names}</td>\r\n                    <td>${registration.ages}</td>\r\n                    <td>\r\n                        <form action=\"/admin/delete\" method=\"POST\">\r\n                            <input type=\"hidden\" name=\"registration_number\" value=\"${registration.registration_number}\" />\r\n                            <button type=\"submit\">Remove</button>\r\n                        </form>\r\n                    </td>\r\n                </tr>\r\n            `;\r\n        });\r\n\r\n        html += '</table>';\r\n        res.send(html);\r\n    });\r\n});\r\n\r\napp.post('/register', async (req, res) => {\r\n    const { email, registrationNumber, timeSlot, names, viewUrl } = req.body;\r\n\r\n    try {\r\n        await sendRegistrationEmail(email, registrationNumber, timeSlot, names, viewUrl);\r\n        res.status(200).send('Registration successful, email sent.');\r\n    } catch (error) {\r\n        res.status(500).send('Registration successful, but email failed.');\r\n    }\r\n});\r\n\r\napp.post('/admin/delete', checkAdminAuth, (req, res) => {\r\n    const registrationNumber = req.body.registration_number;\r\n\r\n    // Retrieve the registration details\r\n    const sqlSelect = 'SELECT * FROM registrations WHERE registration_number = ?';\r\n\r\n    connection.query(sqlSelect, [registrationNumber], (err, results) => {\r\n        if (err || results.length === 0) {\r\n            return res.send('Error finding the registration.');\r\n        }\r\n\r\n        const registration = results[0];\r\n        const numberOfPeople = registration.names.split(', ').length;  // Split by comma to count names\r\n\r\n        // Delete the registration from the database\r\n        const sqlDelete = 'DELETE FROM registrations WHERE registration_number = ?';\r\n        connection.query(sqlDelete, [registrationNumber], (err) => {\r\n            if (err) {\r\n                return res.send('Error deleting the registration.');\r\n            }\r\n\r\n            // Add back the number of spots to the time slot\r\n            const sqlUpdateSpots = 'UPDATE time_slots SET spots_remaining = spots_remaining + ? WHERE time_slot = ?';\r\n            connection.query(sqlUpdateSpots, [numberOfPeople, registration.time_slot], (err) => {\r\n                if (err) {\r\n                    return res.send('Error updating spots.');\r\n                }\r\n\r\n                res.redirect('/admin');  // Refresh the admin page after deletion\r\n            });\r\n        });\r\n    });\r\n});\r\n\r\n// Serve the landing and registration pages\r\napp.get('/', (req, res) => {\r\n    res.sendFile(__dirname + '/public/index.html');\r\n});\r\n\r\napp.get('/register.html', (req, res) => {\r\n    res.sendFile(__dirname + '/public/register.html');\r\n});\r\n\r\napp.get('/spots', (req, res) => {\r\n    const sql = 'SELECT time_slot, spots_remaining FROM time_slots';\r\n    connection.query(sql, (err, results) => {\r\n        if (err) {\r\n            return res.status(500).json({ error: 'Error fetching available spots' });\r\n        }\r\n        res.json(results);\r\n    });\r\n});\r\n\r\n// Handle form submission\r\napp.post('/submit', (req, res) => {\r\n    const { timeSlot, email, names, ages } = req.body;\r\n    const registrationNumber = generateRegistrationNumber();\r\n\r\n    // Step 1: Check the remaining spots from the database\r\n    const checkSpotsSql = 'SELECT spots_remaining FROM time_slots WHERE time_slot = ?';\r\n    connection.query(checkSpotsSql, [timeSlot], (err, results) => {\r\n        if (err || results.length === 0) {\r\n            console.error('Error checking spots:', err);\r\n            return res.send(`\r\n                <head>\r\n                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                    <title>Registration Failed</title>\r\n                </head>\r\n                <h1>Registration Failed</h1>\r\n                <p>Could not retrieve available spots. Please try again later.</p>\r\n                <a href=\"/register.html\">Go back</a>\r\n            `);\r\n        }\r\n\r\n        const spotsRemaining = results[0].spots_remaining;\r\n\r\n        // Step 2: Check if there are enough spots\r\n        if (spotsRemaining < names.length) {\r\n            return res.send(`\r\n                <head>\r\n                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                    <title>Registration Failed</title>\r\n                </head>\r\n                <h1>Registration Failed</h1>\r\n                <p>Sorry, there aren't enough spots left for the selected time slot (${timeSlot}).</p>\r\n                <a href=\"/register.html\">Go back and try another slot</a>\r\n            `);\r\n        }\r\n\r\n        // Step 3: Deduct the number of registered people from the available spots\r\n        const updateSpotsSql = 'UPDATE time_slots SET spots_remaining = spots_remaining - ? WHERE time_slot = ?';\r\n        connection.query(updateSpotsSql, [names.length, timeSlot], (err) => {\r\n            if (err) {\r\n                console.error('Error updating spots:', err);\r\n                return res.send(`\r\n                    <head>\r\n                        <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                        <title>Registration Failed</title>\r\n                    </head>\r\n                    <h1>Registration Failed</h1>\r\n                    <p>Could not update available spots. Please try again later.</p>\r\n                    <a href=\"/register.html\">Go back</a>\r\n                `);\r\n            }\r\n\r\n            // Step 4: Save registration to the MySQL database\r\n            const sql = `\r\n                INSERT INTO registrations (registration_number, email, time_slot, names, ages)\r\n                VALUES (?, ?, ?, ?, ?)\r\n            `;\r\n            const namesString = names.join(', ');\r\n            const agesString = ages.join(', ');\r\n\r\n            connection.query(sql, [registrationNumber, email, timeSlot, namesString, agesString], (err) => {\r\n                if (err) {\r\n                    console.error('Database error:', err);\r\n                    return res.send(`\r\n                        <head>\r\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                            <title>Registration Failed</title>\r\n                        </head>\r\n                        <h1>Registration Failed</h1>\r\n                        <p>There was an issue saving your registration. Please try again later.</p>\r\n                        <a href=\"/register.html\">Go back</a>\r\n                    `);\r\n                }\r\n\r\n                //Send email\r\n                const viewUrl = `https://your-domain.com/view-registration?number=${registrationNumber}`;\r\n                sendRegistrationEmail(email, registrationNumber, timeSlot, names, viewUrl);\r\n\r\n                // Return a confirmation\r\n                res.send(`\r\n                    <head>\r\n                        <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                        <title>Thank you!</title>\r\n                    </head>\r\n                    <h1>Thank you for registering!</h1>\r\n                    <p>You have registered ${names.length} person(s) for the ${timeSlot} time slot.</p>\r\n                    <p>Your registration number is <strong>${registrationNumber}</strong>. Please keep this number for future reference.</p>\r\n                    <a href=\"/\">Go back to the home page</a>\r\n                `);\r\n            });\r\n        });\r\n    });\r\n});\r\n\r\n// Start server\r\nconst PORT = process.env.PORT || 3000;\r\napp.listen(PORT, () => {\r\n    console.log(`Server running on port ${PORT}`);\r\n});\r\n"],"mappings":"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"}},"mtime":1727019545252},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\hauntbrunswick.com\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"configFile\":false,\"cwd\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\hauntbrunswick.com\",\"filename\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\hauntbrunswick.com\\\\TESTEMAIL.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\hauntbrunswick.com\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.1:production":{"value":{"code":"\"use strict\";\n\nconst nodemailer = require('nodemailer');\nconst transporter = nodemailer.createTransport({\n  host: 'smtp.office365.com',\n  port: 587,\n  secure: false,\n  // Use TLS\n  auth: {\n    user: 'donotreply@hauntbrunswick.com',\n    pass: 'vsjwbdbfhvqrvyqw'\n  },\n  tls: {\n    rejectUnauthorized: false\n  }\n});\nconst mailOptions = {\n  from: 'donotreply@hauntbrunswick.com',\n  to: '696969ik@gmail.com',\n  subject: 'Test Email',\n  text: 'This is a test email to verify the app password.'\n};\ntransporter.sendMail(mailOptions, (error, info) => {\n  if (error) {\n    console.error('Error sending email:', error);\n  } else {\n    console.log('Email sent:', info.response);\n  }\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJub2RlbWFpbGVyIiwicmVxdWlyZSIsInRyYW5zcG9ydGVyIiwiY3JlYXRlVHJhbnNwb3J0IiwiaG9zdCIsInBvcnQiLCJzZWN1cmUiLCJhdXRoIiwidXNlciIsInBhc3MiLCJ0bHMiLCJyZWplY3RVbmF1dGhvcml6ZWQiLCJtYWlsT3B0aW9ucyIsImZyb20iLCJ0byIsInN1YmplY3QiLCJ0ZXh0Iiwic2VuZE1haWwiLCJlcnJvciIsImluZm8iLCJjb25zb2xlIiwibG9nIiwicmVzcG9uc2UiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcQW5kcmV3XFxEb2N1bWVudHNcXFByb2plY3RzXFxISCAyNCdcXGhhdW50YnJ1bnN3aWNrLmNvbVxcIiwic291cmNlcyI6WyJURVNURU1BSUwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgbm9kZW1haWxlciA9IHJlcXVpcmUoJ25vZGVtYWlsZXInKTtcclxuXHJcbmNvbnN0IHRyYW5zcG9ydGVyID0gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoe1xyXG4gIGhvc3Q6ICdzbXRwLm9mZmljZTM2NS5jb20nLFxyXG4gIHBvcnQ6IDU4NyxcclxuICBzZWN1cmU6IGZhbHNlLCAvLyBVc2UgVExTXHJcbiAgYXV0aDoge1xyXG4gICAgdXNlcjogJ2Rvbm90cmVwbHlAaGF1bnRicnVuc3dpY2suY29tJyxcclxuICAgIHBhc3M6ICd2c2p3YmRiZmh2cXJ2eXF3J1xyXG4gIH0sXHJcbiAgdGxzOiB7XHJcbiAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlXHJcbiAgfVxyXG59KTtcclxuXHJcbmNvbnN0IG1haWxPcHRpb25zID0ge1xyXG4gIGZyb206ICdkb25vdHJlcGx5QGhhdW50YnJ1bnN3aWNrLmNvbScsXHJcbiAgdG86ICc2OTY5Njlpa0BnbWFpbC5jb20nLFxyXG4gIHN1YmplY3Q6ICdUZXN0IEVtYWlsJyxcclxuICB0ZXh0OiAnVGhpcyBpcyBhIHRlc3QgZW1haWwgdG8gdmVyaWZ5IHRoZSBhcHAgcGFzc3dvcmQuJ1xyXG59O1xyXG5cclxudHJhbnNwb3J0ZXIuc2VuZE1haWwobWFpbE9wdGlvbnMsIChlcnJvciwgaW5mbykgPT4ge1xyXG4gIGlmIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VuZGluZyBlbWFpbDonLCBlcnJvcik7XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnNvbGUubG9nKCdFbWFpbCBzZW50OicsIGluZm8ucmVzcG9uc2UpO1xyXG4gIH1cclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxVQUFVLEdBQUdDLE9BQU8sQ0FBQyxZQUFZLENBQUM7QUFFeEMsTUFBTUMsV0FBVyxHQUFHRixVQUFVLENBQUNHLGVBQWUsQ0FBQztFQUM3Q0MsSUFBSSxFQUFFLG9CQUFvQjtFQUMxQkMsSUFBSSxFQUFFLEdBQUc7RUFDVEMsTUFBTSxFQUFFLEtBQUs7RUFBRTtFQUNmQyxJQUFJLEVBQUU7SUFDSkMsSUFBSSxFQUFFLCtCQUErQjtJQUNyQ0MsSUFBSSxFQUFFO0VBQ1IsQ0FBQztFQUNEQyxHQUFHLEVBQUU7SUFDSEMsa0JBQWtCLEVBQUU7RUFDdEI7QUFDRixDQUFDLENBQUM7QUFFRixNQUFNQyxXQUFXLEdBQUc7RUFDbEJDLElBQUksRUFBRSwrQkFBK0I7RUFDckNDLEVBQUUsRUFBRSxvQkFBb0I7RUFDeEJDLE9BQU8sRUFBRSxZQUFZO0VBQ3JCQyxJQUFJLEVBQUU7QUFDUixDQUFDO0FBRURkLFdBQVcsQ0FBQ2UsUUFBUSxDQUFDTCxXQUFXLEVBQUUsQ0FBQ00sS0FBSyxFQUFFQyxJQUFJLEtBQUs7RUFDakQsSUFBSUQsS0FBSyxFQUFFO0lBQ1RFLE9BQU8sQ0FBQ0YsS0FBSyxDQUFDLHNCQUFzQixFQUFFQSxLQUFLLENBQUM7RUFDOUMsQ0FBQyxNQUFNO0lBQ0xFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGFBQWEsRUFBRUYsSUFBSSxDQUFDRyxRQUFRLENBQUM7RUFDM0M7QUFDRixDQUFDLENBQUMifQ==","map":{"version":3,"names":["nodemailer","require","transporter","createTransport","host","port","secure","auth","user","pass","tls","rejectUnauthorized","mailOptions","from","to","subject","text","sendMail","error","info","console","log","response"],"sourceRoot":"C:\\Users\\Andrew\\Documents\\Projects\\HH 24'\\hauntbrunswick.com\\","sources":["TESTEMAIL.js"],"sourcesContent":["const nodemailer = require('nodemailer');\r\n\r\nconst transporter = nodemailer.createTransport({\r\n  host: 'smtp.office365.com',\r\n  port: 587,\r\n  secure: false, // Use TLS\r\n  auth: {\r\n    user: 'donotreply@hauntbrunswick.com',\r\n    pass: 'vsjwbdbfhvqrvyqw'\r\n  },\r\n  tls: {\r\n    rejectUnauthorized: false\r\n  }\r\n});\r\n\r\nconst mailOptions = {\r\n  from: 'donotreply@hauntbrunswick.com',\r\n  to: '696969ik@gmail.com',\r\n  subject: 'Test Email',\r\n  text: 'This is a test email to verify the app password.'\r\n};\r\n\r\ntransporter.sendMail(mailOptions, (error, info) => {\r\n  if (error) {\r\n    console.error('Error sending email:', error);\r\n  } else {\r\n    console.log('Email sent:', info.response);\r\n  }\r\n});\r\n"],"mappings":";;AAAA,MAAMA,UAAU,GAAGC,OAAO,CAAC,YAAY,CAAC;AAExC,MAAMC,WAAW,GAAGF,UAAU,CAACG,eAAe,CAAC;EAC7CC,IAAI,EAAE,oBAAoB;EAC1BC,IAAI,EAAE,GAAG;EACTC,MAAM,EAAE,KAAK;EAAE;EACfC,IAAI,EAAE;IACJC,IAAI,EAAE,+BAA+B;IACrCC,IAAI,EAAE;EACR,CAAC;EACDC,GAAG,EAAE;IACHC,kBAAkB,EAAE;EACtB;AACF,CAAC,CAAC;AAEF,MAAMC,WAAW,GAAG;EAClBC,IAAI,EAAE,+BAA+B;EACrCC,EAAE,EAAE,oBAAoB;EACxBC,OAAO,EAAE,YAAY;EACrBC,IAAI,EAAE;AACR,CAAC;AAEDd,WAAW,CAACe,QAAQ,CAACL,WAAW,EAAE,CAACM,KAAK,EAAEC,IAAI,KAAK;EACjD,IAAID,KAAK,EAAE;IACTE,OAAO,CAACF,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;EAC9C,CAAC,MAAM;IACLE,OAAO,CAACC,GAAG,CAAC,aAAa,EAAEF,IAAI,CAACG,QAAQ,CAAC;EAC3C;AACF,CAAC,CAAC"}},"mtime":1726936652383},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\scanner\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"configFile\":false,\"cwd\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\scanner\",\"filename\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\scanner\\\\server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\scanner\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.1:production":{"value":{"code":"\"use strict\";\n\nconst express = require('express');\nconst mysql = require('mysql2');\nconst bodyParser = require('body-parser');\nconst path = require('path');\nconst app = express();\n\n// MySQL connection setup\nconst connection = mysql.createConnection({\n  host: '100.87.150.78',\n  port: '3667',\n  user: 'valak',\n  password: 'SLEEP4tG',\n  database: 'MYSQL_DATABASE'\n});\nconnection.connect(err => {\n  if (err) {\n    console.error('Error connecting to MySQL:', err.stack);\n    return;\n  }\n  console.log('Connected to MySQL');\n});\napp.use(bodyParser.urlencoded({\n  extended: true\n}));\napp.use(express.static('public'));\napp.use(express.json());\n\n// Serve the QR code scanner page\napp.get('/', (req, res) => {\n  res.sendFile(path.join(__dirname, 'public/index.html'));\n});\n\n// API route to handle QR code scan data\napp.post('/checkin', (req, res) => {\n  const {\n    registrationNumber,\n    email\n  } = req.body;\n\n  // Query to verify registration from MySQL\n  const sql = 'SELECT * FROM registrations WHERE registration_number = ? AND email = ?';\n  connection.query(sql, [registrationNumber, email], (err, results) => {\n    if (err || results.length === 0) {\n      return res.status(404).json({\n        success: false,\n        message: 'Registrant not found!'\n      });\n    }\n\n    // Respond with registrant details if found\n    const registrant = results[0];\n    res.status(200).json({\n      success: true,\n      registrant: {\n        name: registrant.names,\n        timeSlot: registrant.time_slot\n      }\n    });\n  });\n});\n\n// Start server\nconst PORT = process.env.PORT || 3000;\napp.listen(PORT, () => {\n  console.log(`QR Code Scanner server running on port ${PORT}`);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsIm15c3FsIiwiYm9keVBhcnNlciIsInBhdGgiLCJhcHAiLCJjb25uZWN0aW9uIiwiY3JlYXRlQ29ubmVjdGlvbiIsImhvc3QiLCJwb3J0IiwidXNlciIsInBhc3N3b3JkIiwiZGF0YWJhc2UiLCJjb25uZWN0IiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwic3RhY2siLCJsb2ciLCJ1c2UiLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJzdGF0aWMiLCJqc29uIiwiZ2V0IiwicmVxIiwicmVzIiwic2VuZEZpbGUiLCJqb2luIiwiX19kaXJuYW1lIiwicG9zdCIsInJlZ2lzdHJhdGlvbk51bWJlciIsImVtYWlsIiwiYm9keSIsInNxbCIsInF1ZXJ5IiwicmVzdWx0cyIsImxlbmd0aCIsInN0YXR1cyIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwicmVnaXN0cmFudCIsIm5hbWUiLCJuYW1lcyIsInRpbWVTbG90IiwidGltZV9zbG90IiwiUE9SVCIsInByb2Nlc3MiLCJlbnYiLCJsaXN0ZW4iXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcQW5kcmV3XFxEb2N1bWVudHNcXFByb2plY3RzXFxISCAyNCdcXHNjYW5uZXJcXCIsInNvdXJjZXMiOlsic2VydmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IG15c3FsID0gcmVxdWlyZSgnbXlzcWwyJyk7XHJcbmNvbnN0IGJvZHlQYXJzZXIgPSByZXF1aXJlKCdib2R5LXBhcnNlcicpO1xyXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xyXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XHJcblxyXG4vLyBNeVNRTCBjb25uZWN0aW9uIHNldHVwXHJcbmNvbnN0IGNvbm5lY3Rpb24gPSBteXNxbC5jcmVhdGVDb25uZWN0aW9uKHtcclxuICAgIGhvc3Q6ICcxMDAuODcuMTUwLjc4JyxcclxuICAgIHBvcnQ6ICczNjY3JyxcclxuICAgIHVzZXI6ICd2YWxhaycsXHJcbiAgICBwYXNzd29yZDogJ1NMRUVQNHRHJyxcclxuICAgIGRhdGFiYXNlOiAnTVlTUUxfREFUQUJBU0UnXHJcbn0pO1xyXG5cclxuY29ubmVjdGlvbi5jb25uZWN0KChlcnIpID0+IHtcclxuICAgIGlmIChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjb25uZWN0aW5nIHRvIE15U1FMOicsIGVyci5zdGFjayk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2coJ0Nvbm5lY3RlZCB0byBNeVNRTCcpO1xyXG59KTtcclxuXHJcbmFwcC51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUgfSkpO1xyXG5hcHAudXNlKGV4cHJlc3Muc3RhdGljKCdwdWJsaWMnKSk7XHJcbmFwcC51c2UoZXhwcmVzcy5qc29uKCkpO1xyXG5cclxuLy8gU2VydmUgdGhlIFFSIGNvZGUgc2Nhbm5lciBwYWdlXHJcbmFwcC5nZXQoJy8nLCAocmVxLCByZXMpID0+IHtcclxuICAgIHJlcy5zZW5kRmlsZShwYXRoLmpvaW4oX19kaXJuYW1lLCAncHVibGljL2luZGV4Lmh0bWwnKSk7XHJcbn0pO1xyXG5cclxuLy8gQVBJIHJvdXRlIHRvIGhhbmRsZSBRUiBjb2RlIHNjYW4gZGF0YVxyXG5hcHAucG9zdCgnL2NoZWNraW4nLCAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgcmVnaXN0cmF0aW9uTnVtYmVyLCBlbWFpbCB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgLy8gUXVlcnkgdG8gdmVyaWZ5IHJlZ2lzdHJhdGlvbiBmcm9tIE15U1FMXHJcbiAgICBjb25zdCBzcWwgPSAnU0VMRUNUICogRlJPTSByZWdpc3RyYXRpb25zIFdIRVJFIHJlZ2lzdHJhdGlvbl9udW1iZXIgPSA/IEFORCBlbWFpbCA9ID8nO1xyXG4gICAgY29ubmVjdGlvbi5xdWVyeShzcWwsIFtyZWdpc3RyYXRpb25OdW1iZXIsIGVtYWlsXSwgKGVyciwgcmVzdWx0cykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIgfHwgcmVzdWx0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ1JlZ2lzdHJhbnQgbm90IGZvdW5kISdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZXNwb25kIHdpdGggcmVnaXN0cmFudCBkZXRhaWxzIGlmIGZvdW5kXHJcbiAgICAgICAgY29uc3QgcmVnaXN0cmFudCA9IHJlc3VsdHNbMF07XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICByZWdpc3RyYW50OiB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiByZWdpc3RyYW50Lm5hbWVzLFxyXG4gICAgICAgICAgICAgICAgdGltZVNsb3Q6IHJlZ2lzdHJhbnQudGltZV9zbG90XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8vIFN0YXJ0IHNlcnZlclxyXG5jb25zdCBQT1JUID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAwO1xyXG5hcHAubGlzdGVuKFBPUlQsICgpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGBRUiBDb2RlIFNjYW5uZXIgc2VydmVyIHJ1bm5pbmcgb24gcG9ydCAke1BPUlR9YCk7XHJcbn0pO1xyXG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU1DLEtBQUssR0FBR0QsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUMvQixNQUFNRSxVQUFVLEdBQUdGLE9BQU8sQ0FBQyxhQUFhLENBQUM7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","map":{"version":3,"names":["express","require","mysql","bodyParser","path","app","connection","createConnection","host","port","user","password","database","connect","err","console","error","stack","log","use","urlencoded","extended","static","json","get","req","res","sendFile","join","__dirname","post","registrationNumber","email","body","sql","query","results","length","status","success","message","registrant","name","names","timeSlot","time_slot","PORT","process","env","listen"],"sourceRoot":"C:\\Users\\Andrew\\Documents\\Projects\\HH 24'\\scanner\\","sources":["server.js"],"sourcesContent":["const express = require('express');\r\nconst mysql = require('mysql2');\r\nconst bodyParser = require('body-parser');\r\nconst path = require('path');\r\nconst app = express();\r\n\r\n// MySQL connection setup\r\nconst connection = mysql.createConnection({\r\n    host: '100.87.150.78',\r\n    port: '3667',\r\n    user: 'valak',\r\n    password: 'SLEEP4tG',\r\n    database: 'MYSQL_DATABASE'\r\n});\r\n\r\nconnection.connect((err) => {\r\n    if (err) {\r\n        console.error('Error connecting to MySQL:', err.stack);\r\n        return;\r\n    }\r\n    console.log('Connected to MySQL');\r\n});\r\n\r\napp.use(bodyParser.urlencoded({ extended: true }));\r\napp.use(express.static('public'));\r\napp.use(express.json());\r\n\r\n// Serve the QR code scanner page\r\napp.get('/', (req, res) => {\r\n    res.sendFile(path.join(__dirname, 'public/index.html'));\r\n});\r\n\r\n// API route to handle QR code scan data\r\napp.post('/checkin', (req, res) => {\r\n    const { registrationNumber, email } = req.body;\r\n\r\n    // Query to verify registration from MySQL\r\n    const sql = 'SELECT * FROM registrations WHERE registration_number = ? AND email = ?';\r\n    connection.query(sql, [registrationNumber, email], (err, results) => {\r\n        if (err || results.length === 0) {\r\n            return res.status(404).json({\r\n                success: false,\r\n                message: 'Registrant not found!'\r\n            });\r\n        }\r\n\r\n        // Respond with registrant details if found\r\n        const registrant = results[0];\r\n        res.status(200).json({\r\n            success: true,\r\n            registrant: {\r\n                name: registrant.names,\r\n                timeSlot: registrant.time_slot\r\n            }\r\n        });\r\n    });\r\n});\r\n\r\n// Start server\r\nconst PORT = process.env.PORT || 3000;\r\napp.listen(PORT, () => {\r\n    console.log(`QR Code Scanner server running on port ${PORT}`);\r\n});\r\n"],"mappings":";;AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,KAAK,GAAGD,OAAO,CAAC,QAAQ,CAAC;AAC/B,MAAME,UAAU,GAAGF,OAAO,CAAC,aAAa,CAAC;AACzC,MAAMG,IAAI,GAAGH,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAMI,GAAG,GAAGL,OAAO,CAAC,CAAC;;AAErB;AACA,MAAMM,UAAU,GAAGJ,KAAK,CAACK,gBAAgB,CAAC;EACtCC,IAAI,EAAE,eAAe;EACrBC,IAAI,EAAE,MAAM;EACZC,IAAI,EAAE,OAAO;EACbC,QAAQ,EAAE,UAAU;EACpBC,QAAQ,EAAE;AACd,CAAC,CAAC;AAEFN,UAAU,CAACO,OAAO,CAAEC,GAAG,IAAK;EACxB,IAAIA,GAAG,EAAE;IACLC,OAAO,CAACC,KAAK,CAAC,4BAA4B,EAAEF,GAAG,CAACG,KAAK,CAAC;IACtD;EACJ;EACAF,OAAO,CAACG,GAAG,CAAC,oBAAoB,CAAC;AACrC,CAAC,CAAC;AAEFb,GAAG,CAACc,GAAG,CAAChB,UAAU,CAACiB,UAAU,CAAC;EAAEC,QAAQ,EAAE;AAAK,CAAC,CAAC,CAAC;AAClDhB,GAAG,CAACc,GAAG,CAACnB,OAAO,CAACsB,MAAM,CAAC,QAAQ,CAAC,CAAC;AACjCjB,GAAG,CAACc,GAAG,CAACnB,OAAO,CAACuB,IAAI,CAAC,CAAC,CAAC;;AAEvB;AACAlB,GAAG,CAACmB,GAAG,CAAC,GAAG,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;EACvBA,GAAG,CAACC,QAAQ,CAACvB,IAAI,CAACwB,IAAI,CAACC,SAAS,EAAE,mBAAmB,CAAC,CAAC;AAC3D,CAAC,CAAC;;AAEF;AACAxB,GAAG,CAACyB,IAAI,CAAC,UAAU,EAAE,CAACL,GAAG,EAAEC,GAAG,KAAK;EAC/B,MAAM;IAAEK,kBAAkB;IAAEC;EAAM,CAAC,GAAGP,GAAG,CAACQ,IAAI;;EAE9C;EACA,MAAMC,GAAG,GAAG,yEAAyE;EACrF5B,UAAU,CAAC6B,KAAK,CAACD,GAAG,EAAE,CAACH,kBAAkB,EAAEC,KAAK,CAAC,EAAE,CAAClB,GAAG,EAAEsB,OAAO,KAAK;IACjE,IAAItB,GAAG,IAAIsB,OAAO,CAACC,MAAM,KAAK,CAAC,EAAE;MAC7B,OAAOX,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACf,IAAI,CAAC;QACxBgB,OAAO,EAAE,KAAK;QACdC,OAAO,EAAE;MACb,CAAC,CAAC;IACN;;IAEA;IACA,MAAMC,UAAU,GAAGL,OAAO,CAAC,CAAC,CAAC;IAC7BV,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACf,IAAI,CAAC;MACjBgB,OAAO,EAAE,IAAI;MACbE,UAAU,EAAE;QACRC,IAAI,EAAED,UAAU,CAACE,KAAK;QACtBC,QAAQ,EAAEH,UAAU,CAACI;MACzB;IACJ,CAAC,CAAC;EACN,CAAC,CAAC;AACN,CAAC,CAAC;;AAEF;AACA,MAAMC,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACF,IAAI,IAAI,IAAI;AACrCzC,GAAG,CAAC4C,MAAM,CAACH,IAAI,EAAE,MAAM;EACnB/B,OAAO,CAACG,GAAG,CAAE,0CAAyC4B,IAAK,EAAC,CAAC;AACjE,CAAC,CAAC"}},"mtime":1727027193881}}